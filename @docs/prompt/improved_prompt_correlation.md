# 빅데이터분석기사 작업형 3유형 - 상관분석 문제 생성 프롬프트

## 🚨🚨🚨 [최우선] 질문 형식 - 반드시 이 형식을 따르세요! 🚨🚨🚨

**생성할 문제의 질문 섹션은 반드시 다음 형식이어야 합니다:**

```
## ❓ 질문

Q1. [첫 번째 구체적인 질문] (출력: 소수점 X자리)
Q2. [두 번째 구체적인 질문] (출력: 소수점 X자리)
Q3. [세 번째 구체적인 질문] (출력: 소수점 X자리)
Q4. [네 번째 구체적인 질문] (출력: 예/아니오)
```

**⛔ 절대 금지:**
- ❌ **1)**, **2)**, **3)** 형식 사용 금지
- ❌ "## 질문" (이모지 없이) 사용 금지 → 반드시 "## ❓ 질문"
- ❌ "분석하시오", "검정하시오" 같은 모호한 표현
- ❌ 출력 형식 명시 없이 질문만 작성

**✅ 반드시 포함:**
- ✅ "## ❓ 질문" 헤더 (이모지 포함)
- ✅ Q1. Q2. Q3. Q4. Q5. 형식 (최소 3개, 최대 7개)
- ✅ 각 질문 끝에 (출력: 소수점 X자리) 형식 명시
- ✅ 한 줄에 하나의 질문

---

## 📋 문제 구조 (순서 엄수)

모든 문제는 정확히 이 순서를 따라야 합니다:

```
# [제목]

## 시나리오
[2-3문장의 현실적인 상황]

## 데이터 생성 코드
```python
[30-40행의 완전한 리터럴 데이터, 2개 이상 연속형 변수]
```

## ❓ 질문

Q1. [질문] (출력: 소수점 X자리)
Q2. [질문] (출력: 소수점 X자리)
Q3. [질문] (출력: 예/아니오)
...

## 힌트
[라이브러리, 함수, 주의사항]

## 정답 코드
```python
[완전한 Python 코드]
```
```

---

## ⚙️ 데이터 생성 규칙

### 필수 조건
- ✅ 30-40행 데이터
- ✅ **2개 이상의 연속형 변수** (키, 몸무게, 공부시간, 판매량, 광고비 등)
- ✅ pandas DataFrame으로만 생성
- ✅ **완전한 리터럴 값** (np.random 사용 절대 금지)
- ✅ 변수명은 **무조건 한국어**
- ❌ CSV 파일 생성 금지
- ❌ 외부 파일 읽기 금지

### 올바른 예시
```python
import pandas as pd

df = pd.DataFrame({
    '학생ID': [f'S{i:02d}' for i in range(1, 31)],
    '공부시간': [2.5, 3.0, 1.5, 4.0, 2.0, 3.5, 4.5, 2.5, 3.0, 5.0,
                 1.0, 3.5, 2.5, 4.0, 3.0, 2.0, 4.5, 3.5, 1.5, 5.0,
                 2.5, 3.0, 4.0, 2.0, 3.5, 4.5, 3.0, 2.5, 4.0, 3.5],
    '시험점수': [65, 75, 55, 85, 60, 80, 90, 70, 75, 95,
                 50, 80, 65, 85, 75, 60, 90, 80, 55, 95,
                 70, 75, 85, 60, 80, 90, 75, 70, 85, 80]
})
```

---

## 📊 상관분석 개념과 유형

### 언제 사용하는가?
- **두 연속형 변수 간의 관계 강도**를 측정할 때
- 예: 공부시간과 시험점수, 키와 몸무게, 광고비와 판매량

### 상관계수 해석
- **0.7 ~ 1.0**: 강한 양의 상관
- **0.3 ~ 0.7**: 중간 양의 상관
- **0.0 ~ 0.3**: 약한 양의 상관
- **-0.3 ~ 0.0**: 약한 음의 상관
- **-0.7 ~ -0.3**: 중간 음의 상관
- **-1.0 ~ -0.7**: 강한 음의 상관

### 유형 1: Pearson 상관계수 (정규성 만족)

**언제:** 선형 관계, 두 변수 모두 정규분포를 따를 때

```python
from scipy.stats import pearsonr
corr, pval = pearsonr(df['변수1'], df['변수2'])
```

**특징:**
- 선형 관계의 강도를 측정
- 이상치에 민감
- 두 변수 모두 정규분포 가정

---

### 유형 2: Spearman 상관계수 (비모수)

**언제:** 비선형 관계, 정규성 만족 안 할 때, 순위 기반

```python
from scipy.stats import spearmanr
corr, pval = spearmanr(df['변수1'], df['변수2'])
```

**특징:**
- 순위 기반 상관관계
- 이상치에 강함
- 정규성 가정 불필요

---

### 유형 3: Kendall Tau (순위 기반, 소표본)

**언제:** 표본 크기가 작을 때, 순위 기반

```python
from scipy.stats import kendalltau
corr, pval = kendalltau(df['변수1'], df['변수2'])
```

**특징:**
- 작은 표본에서 더 정확
- 순위 기반
- Spearman보다 보수적

---

## 💡 질문 구성 패턴

### 기본 질문 (2개 변수)

```
## ❓ 질문

Q1. '공부시간'과 '시험점수'의 Pearson 상관계수를 소수점 3자리까지 구하시오. (출력: 소수점 3자리)
Q2. Pearson 상관분석의 p-value를 소수점 4자리까지 구하시오. (출력: 소수점 4자리)
Q3. 유의수준 0.05에서 두 변수 간 유의한 상관관계가 있는지 판단하시오. (출력: "있다" 또는 "없다")
```

### 고급 질문 (3개 이상 변수)

```
## ❓ 질문

Q1. '공부시간'과 '시험점수'의 Pearson 상관계수를 구하시오. (출력: 소수점 3자리)
Q2. '출석일수'와 '시험점수'의 Pearson 상관계수를 구하시오. (출력: 소수점 3자리)
Q3. '공부시간'과 '출석일수'의 Pearson 상관계수를 구하시오. (출력: 소수점 3자리)
Q4. 절대값 기준 가장 강한 상관관계를 보이는 변수 쌍을 구하시오. (출력: "변수1-변수2")
Q5. '시험점수'와의 상관관계가 유의수준 0.05에서 유의한 변수를 모두 구하시오. (출력: "변수1, 변수2")
```

---

## 🎯 힌트 템플릿

```markdown
## 힌트

### 필요한 라이브러리
- pandas
- scipy.stats: pearsonr, spearmanr, kendalltau

### 주요 함수
1. Pearson 상관: `pearsonr(df['변수1'], df['변수2'])`
2. Spearman 상관: `spearmanr(df['변수1'], df['변수2'])`
3. 가장 강한 상관: `abs(corr)` 사용하여 절대값 비교
4. 딕셔너리 최댓값 키: `max(dict, key=dict.get)`

### 판단 기준
- p-value < 0.05 → 유의한 상관관계 있음
- p-value ≥ 0.05 → 유의한 상관관계 없음

### 흔한 실수
❌ 음의 상관계수를 약한 상관으로 판단 (절대값 사용 필수!)
❌ p-value 해석 오류 (p < 0.05면 유의함)
❌ 여러 변수 비교 시 abs() 없이 max() 사용 (음수가 가장 작은 값이 됨)
```

---

## 📝 정답 코드 템플릿

### 기본 템플릿 (2개 변수)

```python
import pandas as pd
from scipy.stats import pearsonr

# 데이터 생성
df = pd.DataFrame({
    '학생ID': [f'S{i:02d}' for i in range(1, 31)],
    '공부시간': [2.5, 3.0, 1.5, 4.0, 2.0, 3.5, 4.5, 2.5, 3.0, 5.0,
                 1.0, 3.5, 2.5, 4.0, 3.0, 2.0, 4.5, 3.5, 1.5, 5.0,
                 2.5, 3.0, 4.0, 2.0, 3.5, 4.5, 3.0, 2.5, 4.0, 3.5],
    '시험점수': [65, 75, 55, 85, 60, 80, 90, 70, 75, 95,
                 50, 80, 65, 85, 75, 60, 90, 80, 55, 95,
                 70, 75, 85, 60, 80, 90, 75, 70, 85, 80]
})

# Q1-Q2: Pearson 상관분석
corr, pval = pearsonr(df['공부시간'], df['시험점수'])
print(round(corr, 3))
print(round(pval, 4))

# Q3: 유의성 판단
print("있다" if pval < 0.05 else "없다")
```

### 고급 템플릿 (3개 이상 변수)

```python
import pandas as pd
from scipy.stats import pearsonr

# 데이터 생성 (3개 변수)
df = pd.DataFrame({
    '학생ID': [f'S{i:02d}' for i in range(1, 31)],
    '공부시간': [2.5, 3.0, 1.5, 4.0, 2.0, 3.5, 4.5, 2.5, 3.0, 5.0,
                 1.0, 3.5, 2.5, 4.0, 3.0, 2.0, 4.5, 3.5, 1.5, 5.0,
                 2.5, 3.0, 4.0, 2.0, 3.5, 4.5, 3.0, 2.5, 4.0, 3.5],
    '출석일수': [18, 22, 15, 25, 19, 23, 27, 20, 22, 28,
                 12, 24, 19, 26, 21, 18, 27, 24, 14, 29,
                 20, 22, 25, 17, 23, 28, 21, 19, 26, 24],
    '시험점수': [65, 75, 55, 85, 60, 80, 90, 70, 75, 95,
                 50, 80, 65, 85, 75, 60, 90, 80, 55, 95,
                 70, 75, 85, 60, 80, 90, 75, 70, 85, 80]
})

# Q1-Q3: 각 변수 쌍의 상관계수
corr1, pval1 = pearsonr(df['공부시간'], df['시험점수'])
print(round(corr1, 3))

corr2, pval2 = pearsonr(df['출석일수'], df['시험점수'])
print(round(corr2, 3))

corr3, pval3 = pearsonr(df['공부시간'], df['출석일수'])
print(round(corr3, 3))

# Q4: 절대값 기준 가장 강한 상관관계
abs_corrs = {
    '공부시간-시험점수': abs(corr1),
    '출석일수-시험점수': abs(corr2),
    '공부시간-출석일수': abs(corr3)
}
print(max(abs_corrs, key=abs_corrs.get))

# Q5: 시험점수와 유의한 상관관계를 보이는 변수
significant_vars = []
if pval1 < 0.05:
    significant_vars.append('공부시간')
if pval2 < 0.05:
    significant_vars.append('출석일수')
print(', '.join(significant_vars))
```

---

## 🔍 시나리오 예시

### 교육 분야
"한 고등학교에서 학생들의 성적에 영향을 주는 요인을 분석하고자 합니다. 30명의 학생을 대상으로 주당 공부시간과 월간 출석일수, 기말시험 점수를 조사했습니다. 각 요인이 시험 점수와 어떤 관계가 있는지 상관분석을 통해 확인하고자 합니다."

### 건강/의학
"한 병원에서 성인 남성의 건강 지표 간 관계를 분석하고자 합니다. 35명의 성인 남성을 대상으로 키, 몸무게, 허리둘레를 측정했습니다. 이들 변수 간 상관관계를 분석하여 건강 관리 지침을 마련하고자 합니다."

### 마케팅/비즈니스
"온라인 쇼핑몰에서 광고 효과를 분석하고자 합니다. 최근 30일간 일별 광고비, 사이트 방문자 수, 매출액 데이터를 수집했습니다. 광고비가 방문자 수와 매출에 미치는 영향을 상관분석으로 확인하고자 합니다."

### 부동산
"한 지역의 아파트 가격 결정 요인을 분석하고자 합니다. 30개 아파트의 평수, 층수, 역세권 거리(m), 거래 가격을 조사했습니다. 각 요인이 가격과 어떤 상관관계를 보이는지 분석하고자 합니다."

---

## ⚠️ 주의사항

### 반드시 지킬 것
1. ✅ 리터럴 데이터만 사용 (np.random 금지)
2. ✅ 변수명은 한국어
3. ✅ 30-40개 샘플
4. ✅ "## ❓ 질문" 헤더 필수
5. ✅ Q1. Q2. Q3. 형식 사용
6. ✅ 2개 이상 연속형 변수 (정수형 또는 실수형)

### 절대값 사용 필수
- **가장 강한 상관**: 반드시 `abs(corr)` 사용
- 예: corr = -0.8은 corr = 0.5보다 강한 상관관계

### 흔한 실수 방지
- ❌ **1)**, **2)** 형식 사용
- ❌ 음의 상관을 약한 상관으로 해석
- ❌ p-value 해석 반대로 (p < 0.05 = 유의하지 않음 ← 틀림)
- ❌ 정답 코드에서 `df = pd.DataFrame({...})` 생략

---

## 🚀 문제 생성 지침

위 모든 규칙을 따라, 다음 순서로 문제를 생성하세요:

1. **# [제목]** - 간결한 제목
2. **## 시나리오** - 2-3문장의 현실적 상황
3. **## 데이터 생성 코드** - 30-40행, 2개 이상 연속형 변수, 리터럴 값으로만
4. **## ❓ 질문** - Q1~Q5 형식 (최소 3개)
5. **## 힌트** - 라이브러리, 함수, 주의사항
6. **## 정답 코드** - 완전한 실행 가능 코드 (데이터 생성 포함)

지금 바로 문제를 생성하세요!
