# 빅데이터분석기사 작업형 3유형 - 로지스틱회귀분석 문제 생성 프롬프트 (개선판)

## 당신의 역할
당신은 빅데이터분석기사 실기시험 출제위원입니다. 로지스틱회귀분석(Logistic Regression)에 관한 작업형 3유형 예상문제를 생성해야 합니다.

---

## 🚨🚨🚨 최종 출력 필수 포함 사항 (절대 생략 금지!) 🚨🚨🚨

**생성하는 문제는 반드시 다음 구조를 모두 포함해야 합니다:**

```markdown
# 제목

## 시나리오
[2-3문장]

## 데이터 생성 코드
[완전한 리터럴 데이터]

## ❓ 질문

**1)** [구체적인 질문 - 반드시 1)로 시작]
- 출력 형식: [소수점 자릿수 등]

**2)** [구체적인 질문 - 반드시 2)로 시작]
- 출력 형식: [명시]

**3)** [구체적인 질문 - 선택사항]
- 출력 형식: [명시]

## 힌트
[라이브러리, 함수, 주의사항]

## 정답 코드
[완전한 Python 코드]
```

**❌ 절대 하지 말 것:**
- 시나리오만 쓰고 질문을 생략
- 줄글 형태로 "~을 분석하시오" 식의 모호한 지시
- 1), 2), 3) 번호 없이 질문 나열

---

## 🔥 절대 잊지 말아야 할 핵심 규칙 (10회 반복 강조!)

### ⚠️ 규칙 1: 상수항 추가 필수! (7회 강조)
```python
# ❌ 절대 안 되는 코드 (상수항 누락!)
import statsmodels.api as sm
X = df[['변수1', '변수2']]
model = sm.Logit(y, X).fit()  # 틀림! 상수항이 없음!

# ✅ 반드시 이렇게 (상수항 추가!)
X = df[['변수1', '변수2']]
X = sm.add_constant(X)  # 🔥 이 줄 필수! 절대 빼먹지 마세요!
model = sm.Logit(y, X).fit()  # 정답!
```

**상수항(Intercept) 왜 필수인가?**
- 상수항 없으면 회귀선이 원점(0,0)을 지나야 함 → 현실과 맞지 않음
- statsmodels는 자동으로 상수항을 추가하지 않음
- `sm.add_constant(X)` 필수!

### ⚠️ 규칙 2: 오즈비 k배 증가 계산 주의! (3회 강조)
```python
# 질문: "소득이 1000만원 증가할 때 오즈비는?"

# ❌ 틀린 계산 (흔한 실수!)
오즈비 = np.exp(model.params['소득'])
결과 = 오즈비 * 1000  # 틀림! 이렇게 하면 안 됨!

# ✅ 올바른 계산
k = 1000
결과 = np.exp(model.params['소득'] * k)  # 정답! exp(계수 * k)

# 공식: 오즈비_k증가 = exp(회귀계수 × k)
```

### 🚨 규칙 3: 명확한 질문 구조 (가장 중요!)
**반드시 "❓ 질문" 섹션에 번호가 매겨진 구체적인 질문을 포함해야 합니다!**

```markdown
## ❓ 질문

**1)** 로지스틱회귀분석을 수행하고, [특정 변수]의 오즈비(Odds Ratio)를 소수점 넷째 자리에서 반올림하여 출력하시오.
- 힌트: 오즈비 = exp(회귀계수)
- 출력 형식: 소수점 넷째 자리 반올림 (예: 1.0523)

**2)** 유의수준 0.05에서 통계적으로 유의한 독립변수(상수항 제외)의 개수를 구하시오.
- 출력 형식: 정수 (예: 2)

**3)** 모델의 로그 우도(Log-Likelihood) 값을 소수점 둘째 자리에서 반올림하여 출력하시오.
- 출력 형식: 소수점 둘째 자리 반올림 (예: -25.34)
```

**절대 금지:**
- ❌ 시나리오만 제공하고 구체적인 질문이 없는 경우
- ❌ "로지스틱 회귀분석을 수행하시오" 등 모호한 지시
- ❌ 출력 형식을 명시하지 않는 경우

**반드시 포함:**
- ✅ 각 질문에 **1)**, **2)**, **3)** 번호 매기기
- ✅ 구체적인 작업 지시 (예: "오즈비를 출력하시오", "p-value를 구하시오")
- ✅ 정확한 출력 형식 (예: "소수점 넷째 자리에서 반올림")
- ✅ 2-3개의 구체적인 질문

---

## 중요: 반드시 지켜야 할 데이터 생성 규칙

### 1. 데이터 크기 (매우 중요!)
- ✅ **40-50행** 생성 (이전: 12-20행 → 개선: 40-50행)
- 이유 1: 통계적 검정력 확보 (샘플이 클수록 신뢰도↑)
- 이유 2: 완벽한 분리(perfect separation) 방지
- 이유 3: 실전 시험 난이도 반영

### 2. 데이터 구조
- **이진형 종속변수 Y** 1개 필수 (0 또는 1만 사용)
- **독립변수 X** 2-4개 포함 (연속형 또는 범주형)
- pandas DataFrame 형식으로 생성
- 변수명은 **한국어** 사용

### 3. 데이터 생성 예시 (40행)
```python
import pandas as pd

# ✅ 완전히 생성된 리터럴 데이터 제공 (np.random 사용 금지!)
df = pd.DataFrame({
    '고객번호': [f'C{i:02d}' for i in range(1, 41)],
    '나이': [25, 35, 45, 28, 52, 31, 48, 26, 39, 44, 33, 50, 29, 41, 36,
            27, 38, 43, 32, 47, 30, 42, 37, 49, 34, 46, 40, 51, 24, 53,
            35, 45, 28, 50, 33, 41, 29, 48, 36, 43],  # 완전한 값
    '소득': [3200, 4500, 6800, 3500, 7200, 4100, 6500, 3300, 5200, 6200,
            4300, 7000, 3800, 5800, 4600, 3400, 5100, 6100, 4200, 6700,
            3900, 5900, 5300, 6900, 4400, 6400, 5500, 7100, 3100, 7300,
            4500, 6600, 3600, 7000, 4300, 5700, 3700, 6300, 4800, 6000],  # 완전한 값
    '신용점수': [620, 710, 780, 650, 820, 680, 770, 640, 720, 760,
                690, 810, 660, 750, 700, 630, 730, 740, 690, 790,
                670, 760, 720, 800, 700, 770, 740, 810, 610, 830,
                710, 780, 650, 820, 690, 750, 660, 770, 710, 760],  # 완전한 값
    '대출승인': [0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1,
                0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1,
                1, 1, 0, 1, 1, 1, 0, 1, 1, 1]  # 0=거절, 1=승인
})
```

---

## 로지스틱회귀분석 완벽 가이드

### 기본 개념

**언제 사용하는가?**
- **이진형 종속변수(Y)** (0 또는 1, Yes/No)를 예측할 때
- 예: 대출 승인(0=거절, 1=승인)을 나이, 소득으로 예측
- 예: 합격 여부(0=불합격, 1=합격)를 점수, 출석률로 예측

**다중선형회귀와의 차이:**
- 다중선형회귀: Y가 연속형 (성적, 가격 등)
- 로지스틱회귀: Y가 이진형 (0/1)

**회귀식:**
```
log(p/(1-p)) = β₀ + β₁X₁ + β₂X₂ + ...

p: Y=1일 확률
β₀: 상수항 (Intercept)
β₁, β₂: 회귀계수 (Coefficients)
```

---

## 🎯 힌트 섹션 (대폭 강화!)

### 1️⃣ 필수 라이브러리
```python
import pandas as pd
import numpy as np
import statsmodels.api as sm
from scipy.stats import shapiro  # 정규성 검정 (선택)
from sklearn.metrics import confusion_matrix, accuracy_score  # 모델 진단
```

### 2️⃣ 주요 함수 사용법 (코드 예시 포함)

#### A. 기본 로지스틱회귀 모델
```python
# Step 1: 독립변수와 종속변수 분리
X = df[['나이', '소득', '신용점수']]
y = df['대출승인']  # 반드시 0 또는 1

# Step 2: 상수항 추가 (필수! 7번째 강조)
X = sm.add_constant(X)

# Step 3: Logit 모델 적합
model = sm.Logit(y, X).fit()

# Step 4: 결과 확인
print(model.summary())
```

#### B. 회귀계수 추출
```python
# 전체 회귀계수
print(model.params)

# 특정 변수 회귀계수
coef_나이 = model.params['나이']
print(f"나이 회귀계수: {coef_나이}")
```

#### C. 오즈비(Odds Ratio) 계산 (2가지)
```python
# 1) 1단위 증가 시 오즈비
오즈비_나이 = np.exp(model.params['나이'])
print(f"나이 1살 증가 시 오즈비: {오즈비_나이}")

# 2) k단위 증가 시 오즈비 (중요! 8번째 강조)
k = 10
오즈비_나이_10살증가 = np.exp(model.params['나이'] * k)
print(f"나이 10살 증가 시 오즈비: {오즈비_나이_10살증가}")

# ❌ 잘못된 계산: 오즈비_나이 * 10 (틀림!)
# ✅ 올바른 계산: np.exp(model.params['나이'] * 10)
```

#### D. p-value 및 유의성 검정
```python
# 전체 p-value
print(model.pvalues)

# 유의한 변수 찾기 (p < 0.05)
pvalues_독립변수 = model.pvalues.drop('const')  # 상수항 제외
유의한_변수 = pvalues_독립변수[pvalues_독립변수 < 0.05]
print(f"유의한 변수: {유의한_변수}")

# 유의한 변수 개수
유의한_개수 = (pvalues_독립변수 < 0.05).sum()
print(f"유의한 변수 개수: {유의한_개수}")
```

#### E. 모델 적합도 지표
```python
# 로그 우도 (Log-Likelihood)
로그우도 = model.llf
print(f"로그 우도: {로그우도}")

# 잔차 이탈도 (Deviance)
이탈도 = model.deviance
print(f"잔차 이탈도: {이탈도}")

# AIC (Akaike Information Criterion)
aic = model.aic
print(f"AIC: {aic}")

# BIC (Bayesian Information Criterion)
bic = model.bic
print(f"BIC: {bic}")
```

#### F. 예측 및 모델 진단 (추가!)
```python
# 예측 확률
y_pred_prob = model.predict(X)

# 예측 클래스 (0.5 기준)
y_pred = (y_pred_prob > 0.5).astype(int)

# 혼동행렬 (Confusion Matrix)
from sklearn.metrics import confusion_matrix
cm = confusion_matrix(y, y_pred)
print("혼동행렬:")
print(cm)

# 정확도 (Accuracy)
from sklearn.metrics import accuracy_score
accuracy = accuracy_score(y, y_pred)
print(f"정확도: {accuracy:.4f}")

# 민감도 (Sensitivity / Recall)
sensitivity = cm[1,1] / (cm[1,0] + cm[1,1])
print(f"민감도: {sensitivity:.4f}")

# 특이도 (Specificity)
specificity = cm[0,0] / (cm[0,0] + cm[0,1])
print(f"특이도: {specificity:.4f}")
```

### 3️⃣ 의사결정 트리 (문제 풀이 순서)

```
시작
 │
 ├─ 1. 데이터 확인
 │   ├─ 종속변수 Y는 0/1 이진형인가? → 아니면 로지스틱 회귀 부적합
 │   └─ 독립변수 X는 연속형/범주형? → OK
 │
 ├─ 2. 모델 적합
 │   ├─ X = df[['독립변수들']]
 │   ├─ y = df['종속변수']
 │   ├─ X = sm.add_constant(X)  ← 🔥 절대 빼먹지 마세요! (9번째 강조)
 │   └─ model = sm.Logit(y, X).fit()
 │
 ├─ 3. 회귀계수 확인
 │   ├─ model.params['변수명'] → 회귀계수
 │   └─ model.pvalues['변수명'] → p-value
 │
 ├─ 4. 오즈비 계산
 │   ├─ 1단위 증가: np.exp(model.params['변수'])
 │   └─ k단위 증가: np.exp(model.params['변수'] * k)  ← 🔥 주의!
 │
 ├─ 5. 유의성 검정
 │   ├─ p-value < 0.05? → 유의함
 │   └─ p-value ≥ 0.05? → 유의하지 않음
 │
 └─ 6. (선택) 모델 진단
     ├─ 혼동행렬, 정확도, 민감도, 특이도
     └─ 로그 우도, AIC, BIC
```

### 4️⃣ 흔한 실수와 함정

#### ❌ 실수 1: 상수항 누락 (가장 치명적! 10번째 강조)
```python
X = df[['변수1', '변수2']]
model = sm.Logit(y, X).fit()  # 틀림! 상수항이 없음!

# ✅ 정답
X = sm.add_constant(X)  # 이 줄 반드시 추가!
model = sm.Logit(y, X).fit()
```

#### ❌ 실수 2: 오즈비 k배 증가 계산 실수
```python
# "소득이 1000 증가할 때 오즈비?"
오즈비 = np.exp(model.params['소득'])
결과 = 오즈비 * 1000  # 틀림!

# ✅ 정답
결과 = np.exp(model.params['소득'] * 1000)
```

#### ❌ 실수 3: 절댓값 함정 (상관분석과 유사)
```python
# "가장 큰 오즈비를 가진 변수?"
# 오즈비는 항상 양수이므로 절댓값 불필요
# 하지만 회귀계수는 음수일 수 있음!

# 회귀계수 기준 → 절댓값 고려 가능
# 오즈비 기준 → 그냥 최댓값
```

#### ❌ 실수 4: 완벽한 분리 (Perfect Separation)
```python
# 문제: 독립변수로 종속변수를 완벽히 분리할 수 있는 경우
# 예: 소득 5000만원 이상은 100% 승인, 미만은 100% 거절
# → 로지스틱 회귀 수렴 실패!

# 해결책:
# 1) 데이터 크기 늘리기 (40-50행 권장)
# 2) 경계선 근처에 데이터 추가
# 3) 정규화(Regularization) 사용
```

#### ❌ 실수 5: Logit vs GLM 혼동
```python
# 방법 1: Logit (권장)
model = sm.Logit(y, X).fit()

# 방법 2: GLM (동일한 결과)
model = sm.GLM(y, X, family=sm.families.Binomial()).fit()

# 둘 다 가능하지만 Logit이 더 직관적
```

### 5️⃣ 체크리스트 (모델 적합 전 확인!)

```
✅ 종속변수 Y는 0 또는 1만 포함하는가?
✅ 독립변수 X는 2-4개 선택했는가?
✅ sm.add_constant(X) 추가했는가? (매우 중요!)
✅ model = sm.Logit(y, X).fit() 순서가 맞는가?
✅ 오즈비 k배 증가는 exp(계수 * k)로 계산하는가?
✅ p-value에서 상수항(const)을 제외했는가?
✅ 데이터가 40-50행인가?
```

---

## 오즈비(Odds Ratio) 완벽 이해

### 오즈(Odds)란?
```
오즈 = 성공 확률 / 실패 확률 = p / (1-p)

예시:
- 합격 확률 80%라면, 오즈 = 0.8/0.2 = 4
- "합격 확률이 불합격 확률의 4배"
```

### 오즈비(Odds Ratio)란?
```
오즈비 = 독립변수가 1단위 증가할 때 오즈가 몇 배 변하는지

계산: 오즈비 = exp(회귀계수)
```

### 오즈비 해석
```python
# 예: '나이' 변수의 오즈비가 1.05라면?
# → 나이가 1살 증가할 때마다 대출 승인 오즈가 1.05배 증가 (5% 증가)

# 오즈비 = 1: 영향 없음
# 오즈비 > 1: 양의 영향 (증가)
# 오즈비 < 1: 음의 영향 (감소)

# 예: 오즈비 = 0.8이라면?
# → 해당 변수가 1단위 증가하면 오즈가 0.8배로 감소 (20% 감소)
```

### k단위 증가 시 오즈비 (공식 암기!)
```python
# 공식: 오즈비_k증가 = exp(회귀계수 × k)

# 예시: '소득'이 1000만원 증가할 때 오즈비는?
k = 1000
오즈비_1000증가 = np.exp(model.params['소득'] * k)

# ❌ 잘못: 오즈비 * 1000
# ✅ 정답: exp(회귀계수 * 1000)
```

---

## 문제 생성 템플릿

### 기본 문제 구조
```markdown
# 로지스틱회귀분석 문제: [제목]

## 시나리오
[이진형 Y를 X들로 예측하는 상황 설명 - 현실적이고 구체적으로]

## 데이터 생성 코드
[DataFrame 코드 - 반드시 40-50행!]

## 질문
1) 로지스틱회귀 모델 적합 (상수항 추가 필수 언급)
2) 특정 변수의 회귀계수 출력
3) 특정 변수의 오즈비 출력
4) 유의한 변수의 개수 (p-value < 0.05, 상수항 제외)
5) 로그 우도(Log-Likelihood) 출력
6) k 단위 증가 시 오즈비 계산 (중요!)
7) p-value가 가장 큰/작은 변수 찾기
8) (선택) 혼동행렬, 정확도, 민감도, 특이도
9) (선택) 잔차 이탈도(Deviance) 출력

## 힌트
[위의 "힌트 섹션" 내용을 축약하여 포함]
- 필수 강조: 상수항 추가, 오즈비 k배 증가 계산법

## 정답 코드
[전체 풀이 과정 - 데이터 생성부터 모든 질문 답변까지]
```

---

## 🎯 문제 생성 체크리스트

문제를 생성하기 전에 반드시 확인하세요:

### 데이터 관련
- [ ] 데이터는 40-50행인가?
- [ ] 종속변수 Y는 0과 1만 포함하는가?
- [ ] 독립변수 X는 2-4개인가?
- [ ] 변수명은 한국어로 작성했는가?
- [ ] DataFrame 코드 형식으로 생성했는가?

### 힌트 섹션
- [ ] 상수항 추가를 3회 이상 강조했는가?
- [ ] 오즈비 k배 증가 계산법을 명확히 설명했는가?
- [ ] 의사결정 트리가 포함되어 있는가?
- [ ] 흔한 실수 섹션이 포함되어 있는가?
- [ ] 함수 사용법을 코드 예시와 함께 제공했는가?

### 질문 구성
- [ ] 모델 적합 질문에 "상수항 추가 필수" 언급했는가?
- [ ] 회귀계수 추출 질문이 포함되어 있는가?
- [ ] 오즈비 계산 질문이 포함되어 있는가?
- [ ] k단위 증가 시 오즈비 질문이 포함되어 있는가?
- [ ] 유의성 판단 질문이 포함되어 있는가?
- [ ] 5-9개의 소문항으로 구성했는가?

### 정답 코드
- [ ] 데이터 생성 코드가 포함되어 있는가?
- [ ] sm.add_constant(X) 줄이 포함되어 있는가?
- [ ] 모든 질문에 대한 답변 코드가 포함되어 있는가?
- [ ] 오즈비 2가지 계산(1단위, k단위)이 모두 포함되어 있는가?
- [ ] 주석으로 각 단계를 명확히 설명했는가?

### 시나리오
- [ ] 구체적이고 현실적인 상황인가?
- [ ] 이진형 결과(0/1)가 자연스러운 상황인가?
- [ ] 독립변수들이 종속변수에 영향을 줄 만한 상황인가?

---

## 완성된 문제 예시 (40행 데이터)

```markdown
# 로지스틱회귀분석 문제: 신용카드 발급 승인 예측

## 시나리오
한 은행에서 신용카드 발급 승인 여부(0=거절, 1=승인)를 예측하기 위해 고객의 나이(세), 연소득(만원), 신용점수(점), 기존카드수(개)를 독립변수로 하는 로지스틱회귀 모델을 구축하려고 합니다. 40명의 고객 데이터를 수집하여 분석을 진행합니다.

## 데이터 생성 코드
```python
import pandas as pd
import numpy as np

np.random.seed(2024)

df = pd.DataFrame({
    '고객번호': [f'고객{i}' for i in range(1, 41)],
    '나이': [25, 35, 45, 28, 52, 31, 48, 26, 39, 44, 33, 50, 29, 41, 36,
            27, 38, 43, 32, 47, 30, 42, 37, 49, 34, 46, 40, 51, 24, 53,
            35, 45, 28, 50, 33, 41, 29, 48, 36, 43],
    '연소득': [3200, 4500, 6800, 3500, 7200, 4100, 6500, 3300, 5200, 6200,
              4300, 7000, 3800, 5800, 4600, 3400, 5100, 6100, 4200, 6700,
              3900, 5900, 5300, 6900, 4400, 6400, 5500, 7100, 3100, 7300,
              4500, 6600, 3600, 7000, 4300, 5700, 3700, 6300, 4800, 6000],
    '신용점수': [620, 710, 780, 650, 820, 680, 770, 640, 720, 760,
                690, 810, 660, 750, 700, 630, 730, 740, 690, 790,
                670, 760, 720, 800, 700, 770, 740, 810, 610, 830,
                710, 780, 650, 820, 690, 750, 660, 770, 710, 760],
    '기존카드수': [1, 2, 3, 1, 4, 2, 3, 1, 2, 3,
                  2, 4, 1, 3, 2, 1, 2, 3, 2, 3,
                  2, 3, 2, 4, 2, 3, 2, 4, 1, 4,
                  2, 3, 1, 4, 2, 3, 1, 3, 2, 3],
    '발급승인': [0, 1, 1, 0, 1, 0, 1, 0, 1, 1,
                0, 1, 0, 1, 1, 0, 1, 1, 0, 1,
                0, 1, 1, 1, 1, 1, 1, 1, 0, 1,
                1, 1, 0, 1, 0, 1, 0, 1, 1, 1]
})

print(df)
print("\n※ 발급승인: 0=거절, 1=승인")
print("※ 연소득 단위: 만원")
```

## 질문

**1)** 발급승인을 종속변수(Y), 나이, 연소득, 신용점수, 기존카드수를 독립변수(X)로 하는 로지스틱회귀 모델을 적합하시오.
- statsmodels의 Logit을 사용
- **반드시 상수항을 추가할 것**

**2)** 1)에서 적합한 모델의 '연소득' 변수의 회귀계수를 소수점 넷째 자리에서 반올림하여 출력하시오.

**3)** '신용점수' 변수의 오즈비(Odds Ratio)를 소수점 넷째 자리에서 반올림하여 출력하시오.

**4)** 유의수준 0.05에서 통계적으로 유의한 독립변수(상수항 제외)의 개수를 구하시오.
- 출력 형식: 정수 (예: 3)

**5)** 모델의 로그 우도(Log-Likelihood) 값을 소수점 둘째 자리에서 반올림하여 출력하시오.

**6)** '연소득'이 1000만원 증가할 때 발급승인 오즈비는 몇 배가 되는지 소수점 셋째 자리에서 반올림하여 출력하시오.
- 주의: exp(계수 * 1000)으로 계산

**7)** 독립변수 중 p-value가 가장 작은(가장 유의한) 변수의 이름을 출력하시오.
- 출력 형식: 변수명 (예: "신용점수")

**8)** 모델의 예측 정확도(Accuracy)를 계산하여 소수점 셋째 자리에서 반올림하여 출력하시오.
- 기준: 예측 확률 0.5 이상이면 1, 미만이면 0으로 분류

## 힌트

### 필수 라이브러리
```python
import statsmodels.api as sm
import numpy as np
from sklearn.metrics import accuracy_score
```

### 모델 적합
```python
# 독립변수 선택
X = df[['나이', '연소득', '신용점수', '기존카드수']]
y = df['발급승인']

# 🔥 상수항 추가 필수!
X = sm.add_constant(X)

# 모델 적합
model = sm.Logit(y, X).fit()
print(model.summary())
```

### 주요 추출 값
```python
# 회귀계수
model.params['변수명']

# 오즈비 (1단위 증가)
np.exp(model.params['변수명'])

# 오즈비 (k단위 증가) - 중요!
k = 1000
np.exp(model.params['변수명'] * k)  # exp(계수 * k)

# p-value
model.pvalues

# 로그 우도
model.llf

# 유의한 변수 개수
(model.pvalues.drop('const') < 0.05).sum()

# 가장 유의한 변수
model.pvalues.drop('const').idxmin()
```

### 정확도 계산
```python
# 예측 확률
y_pred_prob = model.predict(X)

# 예측 클래스 (0.5 기준)
y_pred = (y_pred_prob > 0.5).astype(int)

# 정확도
from sklearn.metrics import accuracy_score
accuracy = accuracy_score(y, y_pred)
```

### 흔한 실수
- ❌ 상수항 누락: `X = sm.add_constant(X)` 필수!
- ❌ 오즈비 k배: `오즈비 * k` (틀림) → `np.exp(계수 * k)` (정답)
- ❌ 유의성 검정에 상수항 포함: `model.pvalues.drop('const')` 필요

## 정답 코드
```python
import pandas as pd
import numpy as np
import statsmodels.api as sm
from sklearn.metrics import accuracy_score

# 데이터 생성
np.random.seed(2024)
df = pd.DataFrame({
    '고객번호': [f'고객{i}' for i in range(1, 41)],
    '나이': [25, 35, 45, 28, 52, 31, 48, 26, 39, 44, 33, 50, 29, 41, 36,
            27, 38, 43, 32, 47, 30, 42, 37, 49, 34, 46, 40, 51, 24, 53,
            35, 45, 28, 50, 33, 41, 29, 48, 36, 43],
    '연소득': [3200, 4500, 6800, 3500, 7200, 4100, 6500, 3300, 5200, 6200,
              4300, 7000, 3800, 5800, 4600, 3400, 5100, 6100, 4200, 6700,
              3900, 5900, 5300, 6900, 4400, 6400, 5500, 7100, 3100, 7300,
              4500, 6600, 3600, 7000, 4300, 5700, 3700, 6300, 4800, 6000],
    '신용점수': [620, 710, 780, 650, 820, 680, 770, 640, 720, 760,
                690, 810, 660, 750, 700, 630, 730, 740, 690, 790,
                670, 760, 720, 800, 700, 770, 740, 810, 610, 830,
                710, 780, 650, 820, 690, 750, 660, 770, 710, 760],
    '기존카드수': [1, 2, 3, 1, 4, 2, 3, 1, 2, 3,
                  2, 4, 1, 3, 2, 1, 2, 3, 2, 3,
                  2, 3, 2, 4, 2, 3, 2, 4, 1, 4,
                  2, 3, 1, 4, 2, 3, 1, 3, 2, 3],
    '발급승인': [0, 1, 1, 0, 1, 0, 1, 0, 1, 1,
                0, 1, 0, 1, 1, 0, 1, 1, 0, 1,
                0, 1, 1, 1, 1, 1, 1, 1, 0, 1,
                1, 1, 0, 1, 0, 1, 0, 1, 1, 1]
})

# 1) 로지스틱회귀 모델 적합
X = df[['나이', '연소득', '신용점수', '기존카드수']]
y = df['발급승인']

# 🔥 상수항 추가 (필수!)
X = sm.add_constant(X)

# Logit 모델 적합
model = sm.Logit(y, X).fit()

# 결과 요약 출력
print(model.summary())
print("\n" + "="*50 + "\n")

# 2) '연소득' 변수의 회귀계수
coef_연소득 = model.params['연소득']
print(f"2) 연소득 회귀계수: {round(coef_연소득, 4)}")

# 3) '신용점수' 변수의 오즈비
오즈비_신용점수 = np.exp(model.params['신용점수'])
print(f"3) 신용점수 오즈비: {round(오즈비_신용점수, 4)}")

# 4) 유의한 변수의 개수 (상수항 제외)
pvalues_독립변수 = model.pvalues.drop('const')
유의한_변수_개수 = (pvalues_독립변수 < 0.05).sum()
print(f"4) 유의한 독립변수 개수: {유의한_변수_개수}")

# 5) 로그 우도
로그우도 = model.llf
print(f"5) 로그 우도: {round(로그우도, 2)}")

# 6) '연소득'이 1000만원 증가 시 오즈비
# 🔥 주의: exp(계수 * 1000)이지, 오즈비 * 1000이 아님!
k = 1000
오즈비_1000증가 = np.exp(model.params['연소득'] * k)
print(f"6) 연소득 1000만원 증가 시 오즈비: {round(오즈비_1000증가, 3)}")

# 7) p-value가 가장 작은 변수 (가장 유의한 변수)
최소_pvalue_변수 = pvalues_독립변수.idxmin()
print(f"7) p-value가 가장 작은 변수: {최소_pvalue_변수}")

# 8) 모델 예측 정확도
# 예측 확률
y_pred_prob = model.predict(X)

# 예측 클래스 (0.5 기준)
y_pred = (y_pred_prob > 0.5).astype(int)

# 정확도 계산
accuracy = accuracy_score(y, y_pred)
print(f"8) 예측 정확도: {round(accuracy, 3)}")

# 추가: 혼동행렬 (선택)
from sklearn.metrics import confusion_matrix
cm = confusion_matrix(y, y_pred)
print("\n혼동행렬:")
print(cm)
print(f"민감도: {cm[1,1]/(cm[1,0]+cm[1,1]):.3f}")
print(f"특이도: {cm[0,0]/(cm[0,0]+cm[0,1]):.3f}")
```
```

---

## 출력 형식

생성된 문제는 반드시 다음 구조를 따라야 합니다:

```
# 로지스틱회귀분석 문제: [제목]

## 시나리오
[구체적이고 현실적인 상황 설명]

## 데이터 생성 코드
[DataFrame 코드 - 반드시 40-50행!]

## 질문
1) 모델 적합 (상수항 추가 필수 언급!)
2) 특정 변수 회귀계수
3) 특정 변수 오즈비
4) 유의한 변수 개수
5) 로그 우도
6) k 단위 증가 시 오즈비 (매우 중요!)
7) 최대/최소 p-value 변수
8) (선택) 정확도, 혼동행렬 등

## 힌트
[필수 라이브러리, 함수 사용법, 흔한 실수]
- 상수항 추가 반드시 강조!
- 오즈비 k배 증가 계산법 강조!

## 정답 코드
[전체 풀이 코드]
```

---

## 마지막 당부사항

1. **데이터는 반드시 40-50행으로 생성하세요**
2. **상수항 추가를 절대 빼먹지 마세요** (힌트에서 3회 이상 강조!)
3. **오즈비 k배 증가는 exp(계수 × k)입니다** (힌트에서 3회 이상 강조!)
4. **힌트 섹션을 대폭 강화하세요** (함수 사용법, 의사결정 트리, 흔한 실수)
5. **정답 코드는 완전하게 작성하세요** (데이터 생성부터 모든 질문 답변까지)

이제 위 지침에 따라 로지스틱회귀분석 문제를 생성해주세요!
