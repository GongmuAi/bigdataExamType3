# 빅데이터분석기사 작업형 3유형 - 등분산성 검정 문제 생성 프롬프트

## 🚨🚨🚨 [최우선] 질문 형식 - 반드시 Q1. Q2. Q3. 형식 사용! 🚨🚨🚨

```
## ❓ 질문

Q1. [질문] (출력: 소수점 X자리)
Q2. [질문] (출력: 소수점 X자리)
Q3. [질문] (출력: 소수점 X자리)
Q4. [질문] (출력: 예/아니오)
```

**⛔ 절대 금지:** **1)**, **2)** 형식 / "## 질문" (이모지 없이)
**✅ 반드시:** "## ❓ 질문" 헤더 / Q1. Q2. Q3. 형식 / (출력: ...) 명시

---

## 📋 문제 구조

```
# [제목]
## 시나리오
[2-3문장]
## 데이터 생성 코드
```python
[30-40행 리터럴 데이터, 2개 이상 그룹]
```
## ❓ 질문
Q1. ... (출력: 소수점 X자리)
## 힌트
## 정답 코드
```

---

## ⚙️ 데이터 규칙

- ✅ 30-40행 (각 그룹 최소 15개)
- ✅ **2개 이상 그룹** (A반/B반, 남성/여성, 그룹A/그룹B 등)
- ✅ 리터럴 값만 사용 (np.random 금지!)
- ✅ 변수명 한국어
- ✅ 연속형 변수 1개

**올바른 예시:**
```python
import pandas as pd

df = pd.DataFrame({
    '학생ID': [f'S{i:02d}' for i in range(1, 41)],
    '반': ['A반']*20 + ['B반']*20,
    '점수': [85, 78, 92, 88, 76, 91, 83, 89, 77, 94,
             86, 79, 90, 87, 81, 93, 84, 88, 80, 91,
             72, 85, 68, 91, 77, 83, 69, 88, 74, 90,
             71, 84, 70, 89, 76, 82, 73, 87, 75, 92]
})
```

---

## 📊 등분산성 검정 2가지 유형

### 유형 1: Levene 검정 (일반적 사용)

**언제:** 정규성 여부와 관계없이 사용 가능 (강건함)

**귀무가설 H₀:** 그룹 간 분산이 동일하다
**대립가설 H₁:** 그룹 간 분산이 동일하지 않다

**판단 기준:**
- p-value > 0.05 → 등분산 만족
- p-value ≤ 0.05 → 등분산 위배

**코드:**
```python
from scipy.stats import levene

그룹A = df[df['그룹'] == 'A']['값']
그룹B = df[df['그룹'] == 'B']['값']
stat, pval = levene(그룹A, 그룹B)
```

### 유형 2: Bartlett 검정 (정규성 만족 시)

**언제:** 모든 그룹이 정규분포를 따를 때만 사용

**귀무가설 H₀:** 그룹 간 분산이 동일하다
**대립가설 H₁:** 그룹 간 분산이 동일하지 않다

**판단 기준:**
- p-value > 0.05 → 등분산 만족
- p-value ≤ 0.05 → 등분산 위배

**코드:**
```python
from scipy.stats import bartlett

그룹A = df[df['그룹'] == 'A']['값']
그룹B = df[df['그룹'] == 'B']['값']
stat, pval = bartlett(그룹A, 그룹B)
```

**⚠️ 주의:** Bartlett는 정규성에 민감하므로 정규성 검정 먼저 수행 필요

---

## 💡 질문 구성 (Q1~Q6)

### Levene 검정 (2그룹)

```
## ❓ 질문

Q1. 'A반' 학생들의 평균 점수를 소수점 2자리까지 구하시오. (출력: 소수점 2자리)
Q2. 'B반' 학생들의 평균 점수를 소수점 2자리까지 구하시오. (출력: 소수점 2자리)
Q3. 'A반' 학생들의 표본 분산을 소수점 2자리까지 구하시오. (출력: 소수점 2자리)
Q4. 'B반' 학생들의 표본 분산을 소수점 2자리까지 구하시오. (출력: 소수점 2자리)
Q5. Levene 검정의 p-value를 소수점 4자리까지 구하시오. (출력: 소수점 4자리)
Q6. 유의수준 0.05에서 두 반의 점수 분산이 동일하다고 할 수 있는지 판단하시오. (출력: "예" 또는 "아니오")
```

### Bartlett 검정 (3그룹 이상)

```
## ❓ 질문

Q1. 'A조' 데이터의 표본 분산을 소수점 2자리까지 구하시오. (출력: 소수점 2자리)
Q2. 'B조' 데이터의 표본 분산을 소수점 2자리까지 구하시오. (출력: 소수점 2자리)
Q3. 'C조' 데이터의 표본 분산을 소수점 2자리까지 구하시오. (출력: 소수점 2자리)
Q4. Bartlett 검정 통계량을 소수점 3자리까지 구하시오. (출력: 소수점 3자리)
Q5. Bartlett 검정의 p-value를 소수점 4자리까지 구하시오. (출력: 소수점 4자리)
Q6. 유의수준 0.05에서 세 조의 분산이 동일하다고 할 수 있는지 판단하시오. (출력: "예" 또는 "아니오")
```

---

## 🎯 힌트 템플릿

```markdown
## 힌트

### 필요한 라이브러리
- pandas
- scipy.stats: levene (또는 bartlett)

### 주요 함수
1. 그룹 분리: `df[df['그룹'] == 'A']['값']`
2. 표본분산: `.var(ddof=1)` ← ddof=1 필수!
3. Levene 검정: `levene(그룹1, 그룹2, ...)`
4. Bartlett 검정: `bartlett(그룹1, 그룹2, ...)`

### 판단 기준
- p > 0.05 → 등분산 만족
- p ≤ 0.05 → 등분산 위배

### 흔한 실수
❌ .var() 사용 (모분산) → .var(ddof=1) 사용 (표본분산)
❌ p-value 해석 오류 (p < 0.05일 때 등분산 만족 ← 틀림)
❌ Bartlett 검정 시 정규성 검정 생략
```

---

## 📝 정답 코드 템플릿

### Levene 검정 (2그룹)

```python
import pandas as pd
from scipy.stats import levene

# 데이터 생성
df = pd.DataFrame({
    '학생ID': [f'S{i:02d}' for i in range(1, 41)],
    '반': ['A반']*20 + ['B반']*20,
    '점수': [85, 78, 92, 88, 76, 91, 83, 89, 77, 94,
             86, 79, 90, 87, 81, 93, 84, 88, 80, 91,
             72, 85, 68, 91, 77, 83, 69, 88, 74, 90,
             71, 84, 70, 89, 76, 82, 73, 87, 75, 92]
})

# 그룹 분리
A반 = df[df['반'] == 'A반']['점수']
B반 = df[df['반'] == 'B반']['점수']

# Q1-Q2: 평균
print(round(A반.mean(), 2))
print(round(B반.mean(), 2))

# Q3-Q4: 표본분산
print(round(A반.var(ddof=1), 2))
print(round(B반.var(ddof=1), 2))

# Q5: Levene 검정
stat, pval = levene(A반, B반)
print(round(pval, 4))

# Q6: 등분산 판단
print("예" if pval > 0.05 else "아니오")
```

### Bartlett 검정 (3그룹)

```python
import pandas as pd
from scipy.stats import bartlett, shapiro

# 데이터 생성
df = pd.DataFrame({
    '샘플ID': [f'S{i:02d}' for i in range(1, 46)],
    '조': ['A조']*15 + ['B조']*15 + ['C조']*15,
    '측정값': [100.2, 102.5, 99.8, 101.3, 100.7, 102.1, 99.5, 101.8, 100.3, 102.4,
               99.9, 101.5, 100.6, 102.0, 101.1,
               98.5, 100.2, 97.8, 99.5, 98.9, 100.7, 97.5, 99.8, 98.2, 100.3,
               97.9, 99.6, 98.4, 100.1, 99.0,
               101.5, 103.2, 100.8, 102.5, 101.9, 103.1, 100.5, 102.8, 101.3, 103.0,
               100.9, 102.6, 101.4, 103.2, 102.0]
})

# 그룹 분리
A조 = df[df['조'] == 'A조']['측정값']
B조 = df[df['조'] == 'B조']['측정값']
C조 = df[df['조'] == 'C조']['측정값']

# Q1-Q3: 표본분산
print(round(A조.var(ddof=1), 2))
print(round(B조.var(ddof=1), 2))
print(round(C조.var(ddof=1), 2))

# Q4-Q5: Bartlett 검정
stat, pval = bartlett(A조, B조, C조)
print(round(stat, 3))
print(round(pval, 4))

# Q6: 등분산 판단
print("예" if pval > 0.05 else "아니오")
```

---

## 🔍 시나리오 예시

### 교육 평가
"한 학교에서 A반과 B반의 수학 시험 점수 분산이 동일한지 확인하고자 합니다. 각 반에서 20명씩 무작위로 선발하여 시험 점수를 수집했습니다."

### 품질 관리
"3개의 생산 라인에서 생산되는 제품의 무게 분산이 동일한지 검증하기 위해 각 라인에서 15개씩 샘플을 추출했습니다."

### 임상 시험
"두 가지 치료 방법의 효과 분산이 동일한지 확인하기 위해 각 그룹에서 25명씩 환자를 선정하여 혈압 변화를 측정했습니다."

### 성별 비교
"남성과 여성의 반응 시간 분산이 동일한지 검증하기 위해 각 그룹에서 30명씩 데이터를 수집했습니다."

---

## ⚠️ 주의사항

### 반드시 지킬 것
1. ✅ 리터럴 데이터만 사용 (np.random 금지)
2. ✅ 변수명은 한국어
3. ✅ 각 그룹 최소 15개 데이터
4. ✅ "## ❓ 질문" 헤더 필수
5. ✅ Q1. Q2. Q3. 형식 사용
6. ✅ 표본분산 계산 시 `.var(ddof=1)` 사용

### Bartlett vs Levene 선택 기준
- **Levene:** 정규성 여부 무관, 일반적으로 더 안전
- **Bartlett:** 정규성 만족 시에만, 더 강력한 검정력

### 흔한 실수 방지
- ❌ **1)**, **2)** 형식 사용
- ❌ p-value 해석 반대로 (p < 0.05 = 등분산 ← 틀림)
- ❌ .var() 사용 (모분산) → .var(ddof=1) 필요
- ❌ Bartlett 사용 전 정규성 검정 생략

---

## 🚀 문제 생성 지침

위 모든 규칙을 따라, 다음 순서로 문제를 생성하세요:

1. **# [제목]** - 간결한 제목
2. **## 시나리오** - 2-3문장의 현실적 상황
3. **## 데이터 생성 코드** - 리터럴 값으로만, 2개 이상 그룹
4. **## ❓ 질문** - Q1~Q6 형식
5. **## 힌트** - 라이브러리, 함수, 주의사항
6. **## 정답 코드** - 완전한 실행 가능 코드

지금 바로 문제를 생성하세요!
