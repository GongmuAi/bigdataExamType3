# 빅데이터분석기사 작업형 3유형 - t검정 문제 생성 프롬프트 (개선판 v2.0)

## 🎯 당신의 역할
당신은 빅데이터분석기사 실기시험 출제위원입니다. t검정(t-test)에 관한 작업형 3유형 예상문제를 생성해야 합니다.

---

## 🚨🚨🚨 최종 출력 필수 포함 사항 (절대 생략 금지!) 🚨🚨🚨

**생성하는 문제는 반드시 다음 구조를 모두 포함해야 합니다:**

```markdown
# 제목

## 시나리오
[2-3문장]

## 데이터 생성 코드
[완전한 리터럴 데이터]

## ❓ 질문

**1)** [구체적인 질문 - 반드시 1)로 시작]
- 출력 형식: [소수점 자릿수 등]

**2)** [구체적인 질문 - 반드시 2)로 시작]
- 출력 형식: [명시]

**3)** [구체적인 질문 - 선택사항]
- 출력 형식: [명시]

## 힌트
[라이브러리, 함수, 주의사항]

## 정답 코드
[완전한 Python 코드]
```

**❌ 절대 하지 말 것:**
- 시나리오만 쓰고 질문을 생략
- 줄글 형태로 "~을 분석하시오" 식의 모호한 지시
- 1), 2), 3) 번호 없이 질문 나열

---

## ⚠️ 절대 규칙 (반드시 준수)

### 규칙 1: 데이터 생성 방식
```python
# ✅ 올바른 형식 (완전히 생성된 데이터를 제공)
import pandas as pd

df = pd.DataFrame({
    '학생ID': [f'S{i:02d}' for i in range(1, 41)],
    '학습방법': ['온라인']*20 + ['오프라인']*20,
    '시험성적': [72, 85, 68, 91, 77, 83, 69, 88, 74, 90,
                 65, 82, 71, 87, 79, 84, 67, 89, 76, 81,
                 78, 92, 85, 88, 91, 76, 83, 95, 87, 79,
                 84, 90, 77, 93, 86, 81, 88, 75, 82, 94]  # 모든 값을 명시적으로 작성
})
```

**필수 조건:**
- ✅ 최소 **30행 이상, 권장 40행** (통계적 검정력 확보)
- ✅ 각 그룹당 최소 15개 이상 샘플
- ✅ pandas DataFrame 형태로만 생성
- ✅ **모든 데이터를 리터럴 값으로 완전히 작성** (생성 코드 아님)
- ❌ np.random 사용 절대 금지 (랜덤 생성 X)
- ❌ CSV 파일 생성 절대 금지
- ❌ 외부 파일 읽기 금지

### 규칙 2: 변수명은 무조건 한국어
```python
# ✅ 좋은 예
df = pd.DataFrame({
    '학생이름': [...],
    '학습방법': ['온라인', '오프라인', ...],
    '시험성적': [85, 90, ...]
})

# ❌ 나쁜 예 (영어 사용 금지)
df = pd.DataFrame({
    'student_name': [...],
    'method': ['online', 'offline', ...],
    'score': [85, 90, ...]
})
```

### 규칙 3: 출력 형식
- 마크다운(.md) 형식
- 명확한 섹션 구분
- 소수점 자리수 명시 (예: "소수점 넷째 자리에서 반올림")

### 🚨 규칙 4: 명확한 질문 구조 (가장 중요!)
**반드시 "❓ 질문" 섹션에 번호가 매겨진 구체적인 질문을 포함해야 합니다!**

```markdown
## ❓ 질문

**1)** [구체적인 첫 번째 작업 지시]
- 출력 형식: [정확한 형식 지정]

**2)** [구체적인 두 번째 작업 지시]
- 출력 형식: [정확한 형식 지정]

**3)** [구체적인 세 번째 작업 지시]
- 출력 형식: [정확한 형식 지정]
```

**절대 금지:**
- ❌ 시나리오만 제공하고 구체적인 질문이 없는 경우
- ❌ "분석하시오", "검정하시오" 등 모호한 지시
- ❌ 출력 형식을 명시하지 않는 경우

**반드시 포함:**
- ✅ 각 질문에 **1)**, **2)**, **3)** 번호 매기기
- ✅ 구체적인 작업 지시 (예: "Shapiro-Wilk 검정을 수행하고 p-value를 출력하시오")
- ✅ 정확한 출력 형식 (예: "소수점 넷째 자리에서 반올림")
- ✅ 2-3개의 구체적인 질문

---

## 📋 필수 문제 구조 (순서 엄수)

모든 t검정 문제는 **정확히 이 순서**를 따라야 합니다:

```
1. 제목 및 문제 유형 명시
2. 시나리오 (현실적이고 구체적으로)
3. 데이터 생성 코드 (30-40행)
4. 질문 (7-9개 소문항)
   - 기술통계량
   - 정규성 검정
   - 등분산성 검정 (독립표본만)
   - 검정 방법 선택
   - 검정 통계량
   - p-value
   - 결론
   - (선택) 효과크기
5. 힌트 (필수! 함수명, 사용법, 주의사항)
6. 정답 코드 (완전한 코드, 주석 포함)
```

---

## 📊 t검정 3가지 유형

### 유형 1: 독립표본 t검정 (Two Independent Samples t-test)

#### 언제 사용?
- **두 개의 독립된 그룹** 비교
- 예시:
  - A반 vs B반 성적
  - 남성 vs 여성 키
  - 약물군 vs 위약군 혈압

#### 데이터 구조
```python
# 그룹을 나타내는 범주형 변수 1개 + 연속형 측정값 1개
df = pd.DataFrame({
    '피험자ID': [...],        # 식별자
    '그룹': ['실험군', '대조군', ...],  # 범주형 (2개 그룹)
    '측정값': [85.2, 90.1, ...]      # 연속형 (비교할 값)
})
```

#### 필수 사전검정
1. **정규성 검정** - 각 그룹별로
   ```python
   from scipy.stats import shapiro
   stat, p = shapiro(그룹데이터)
   # p > 0.05 → 정규분포 따름
   # p ≤ 0.05 → 정규분포 안 따름 (비모수 검정 고려)
   ```

2. **등분산성 검정** - 두 그룹 간
   ```python
   from scipy.stats import levene
   stat, p = levene(그룹1, 그룹2)
   # p > 0.05 → 등분산 만족
   # p ≤ 0.05 → 등분산 불만족
   ```

#### 검정 수행
```python
from scipy.stats import ttest_ind

# 정규성 O + 등분산 O → Student's t-test
t_stat, p_value = ttest_ind(그룹1, 그룹2, equal_var=True)

# 정규성 O + 등분산 X → Welch's t-test
t_stat, p_value = ttest_ind(그룹1, 그룹2, equal_var=False)

# 정규성 X → Mann-Whitney U 검정
from scipy.stats import mannwhitneyu
stat, p_value = mannwhitneyu(그룹1, 그룹2, alternative='two-sided')
```

#### 질문 구성 (독립표본 t검정)
```
1) 각 그룹의 평균과 표준편차를 계산하시오.
2) 각 그룹의 데이터에 대해 Shapiro-Wilk 정규성 검정을 수행하시오.
   - 그룹1 p-value: 소수점 넷째 자리 반올림
   - 그룹2 p-value: 소수점 넷째 자리 반올림
3) 두 그룹의 등분산성을 Levene 검정으로 확인하시오.
   - p-value: 소수점 넷째 자리 반올림
4) 2)와 3)의 결과를 바탕으로 적절한 검정 방법을 선택하고 검정을 수행하시오.
   - 사용한 검정 방법: "Student's t-test" 또는 "Welch's t-test" 또는 "Mann-Whitney U"
5) 4)에서 수행한 검정의 검정 통계량을 소수점 셋째 자리에서 반올림하여 출력하시오.
6) p-value를 소수점 넷째 자리에서 반올림하여 출력하시오.
7) 유의수준 0.05에서 두 그룹 간 차이가 유의한지 판단하시오.
   - "유의한 차이가 있다" 또는 "유의한 차이가 없다"
8) (선택) Cohen's d를 이용하여 효과크기를 계산하시오. (소수점 셋째 자리 반올림)
```

#### 독립표본 t검정 문제 생성 템플릿

```markdown
# 독립표본 t검정 문제: [구체적 제목]

## 시나리오
[현실적인 상황 설명 - 3-5문장]
- 어떤 조직/기관에서
- 무엇을 비교하기 위해
- 어떤 데이터를 수집했는지
- 무엇을 검정하려는지

## 데이터 생성 코드
```python
import pandas as pd

df = pd.DataFrame({
    '[ID변수]': [f'ID{i:02d}' for i in range(1, 41)],  # 40개
    '[그룹변수]': ['[그룹A]']*20 + ['[그룹B]']*20,  # 각 20개
    '[측정변수]': [72, 85, 68, 91, 77, 83, 69, 88, 74, 90,
                   65, 82, 71, 87, 79, 84, 67, 89, 76, 81,
                   78, 92, 85, 88, 91, 76, 83, 95, 87, 79,
                   84, 90, 77, 93, 86, 81, 88, 75, 82, 94]  # 완전한 리터럴 값 (랜덤 생성 X)
})

print(df)
print(f"\n그룹별 샘플 수:")
print(df['[그룹변수]'].value_counts())
```

## 질문

**1)** 각 그룹([그룹A], [그룹B])의 [측정변수]에 대한 평균과 표준편차를 계산하시오.
- [그룹A] 평균: 소수점 둘째 자리에서 반올림
- [그룹A] 표준편차: 소수점 둘째 자리에서 반올림
- [그룹B] 평균: 소수점 둘째 자리에서 반올림
- [그룹B] 표준편차: 소수점 둘째 자리에서 반올림

**2)** 각 그룹의 [측정변수] 데이터에 대해 Shapiro-Wilk 정규성 검정을 수행하시오.
- [그룹A] p-value: 소수점 넷째 자리에서 반올림하여 출력
- [그룹B] p-value: 소수점 넷째 자리에서 반올림하여 출력

**3)** 두 그룹의 등분산성을 Levene 검정으로 확인하시오.
- p-value를 소수점 넷째 자리에서 반올림하여 출력

**4)** 2)와 3)의 결과를 바탕으로 적절한 검정 방법을 선택하시오.
- 정규성 만족 여부: "만족" 또는 "불만족"
- 등분산성 만족 여부 (정규성 만족 시만): "만족" 또는 "불만족"
- 선택한 검정 방법: "Student's t-test" 또는 "Welch's t-test" 또는 "Mann-Whitney U"

**5)** 4)에서 선택한 검정을 수행하고 검정 통계량을 소수점 셋째 자리에서 반올림하여 출력하시오.

**6)** 5)에서 수행한 검정의 p-value를 소수점 넷째 자리에서 반올림하여 출력하시오.

**7)** 유의수준 0.05에서 두 그룹 간 [측정변수]에 유의한 차이가 있는지 판단하시오.
- 출력 형식: "유의한 차이가 있다" 또는 "유의한 차이가 없다"

**8)** (선택) 정규성을 만족하는 경우, Cohen's d를 계산하여 효과크기를 평가하시오.
- Cohen's d: 소수점 셋째 자리에서 반올림
- 해석: |d| < 0.2 (작음), 0.2 ≤ |d| < 0.8 (중간), |d| ≥ 0.8 (큼)

## 힌트

### 필요한 라이브러리
```python
import pandas as pd
import numpy as np
from scipy.stats import shapiro, levene, ttest_ind, mannwhitneyu
```

### 주요 함수 사용법
1. **그룹 분리**
   ```python
   그룹A = df[df['그룹변수'] == '그룹A']['측정변수']
   그룹B = df[df['그룹변수'] == '그룹B']['측정변수']
   ```

2. **기술통계**
   ```python
   평균 = 그룹A.mean()
   표준편차 = 그룹A.std()
   ```

3. **정규성 검정**
   ```python
   stat, p = shapiro(그룹A)
   # p > 0.05 → 정규분포 따름
   ```

4. **등분산성 검정**
   ```python
   stat, p = levene(그룹A, 그룹B)
   # p > 0.05 → 등분산 만족
   ```

5. **독립표본 t검정**
   ```python
   # 등분산 O
   t_stat, p_value = ttest_ind(그룹A, 그룹B, equal_var=True)
   
   # 등분산 X
   t_stat, p_value = ttest_ind(그룹A, 그룹B, equal_var=False)
   ```

6. **Mann-Whitney U 검정** (정규성 불만족 시)
   ```python
   stat, p_value = mannwhitneyu(그룹A, 그룹B, alternative='two-sided')
   ```

7. **Cohen's d**
   ```python
   mean_diff = 그룹A.mean() - 그룹B.mean()
   pooled_std = np.sqrt(((len(그룹A)-1)*그룹A.std()**2 + (len(그룹B)-1)*그룹B.std()**2) / (len(그룹A) + len(그룹B) - 2))
   cohens_d = mean_diff / pooled_std
   ```

### 의사결정 트리
```
정규성 검정 (각 그룹)
├─ 둘 다 만족 (p > 0.05)
│  └─ 등분산성 검정
│     ├─ 만족 (p > 0.05) → Student's t-test (equal_var=True)
│     └─ 불만족 (p ≤ 0.05) → Welch's t-test (equal_var=False)
└─ 하나라도 불만족 (p ≤ 0.05)
   └─ Mann-Whitney U 검정 (비모수)
```

### 흔한 실수
❌ 그룹 분리 없이 전체 데이터로 검정
❌ equal_var 파라미터 설정 누락
❌ 정규성 불만족인데 t검정 사용
❌ p-value 해석 오류 (p < 0.05면 차이 있음)

## 정답 코드
```python
import pandas as pd
import numpy as np
from scipy.stats import shapiro, levene, ttest_ind, mannwhitneyu

# 데이터 (위와 동일하게 완전한 리터럴 값 사용)
df = pd.DataFrame({
    '[ID변수]': [f'ID{i:02d}' for i in range(1, 41)],
    '[그룹변수]': ['[그룹A]']*20 + ['[그룹B]']*20,
    '[측정변수]': [72, 85, 68, 91, 77, 83, 69, 88, 74, 90,
                   65, 82, 71, 87, 79, 84, 67, 89, 76, 81,
                   78, 92, 85, 88, 91, 76, 83, 95, 87, 79,
                   84, 90, 77, 93, 86, 81, 88, 75, 82, 94]
})

# 그룹 분리
그룹A = df[df['[그룹변수]'] == '[그룹A]']['[측정변수]']
그룹B = df[df['[그룹변수]'] == '[그룹B]']['[측정변수]']

print("="*60)
print("독립표본 t검정 분석 결과")
print("="*60)

# 1) 기술통계량
print("\n[1] 기술통계량")
print(f"[그룹A] 평균: {round(그룹A.mean(), 2)}")
print(f"[그룹A] 표준편차: {round(그룹A.std(), 2)}")
print(f"[그룹B] 평균: {round(그룹B.mean(), 2)}")
print(f"[그룹B] 표준편차: {round(그룹B.std(), 2)}")

# 2) 정규성 검정
print("\n[2] 정규성 검정 (Shapiro-Wilk)")
stat_A, p_A = shapiro(그룹A)
stat_B, p_B = shapiro(그룹B)
print(f"[그룹A] p-value: {round(p_A, 4)}")
print(f"[그룹B] p-value: {round(p_B, 4)}")

정규성_만족 = (p_A > 0.05) and (p_B > 0.05)
print(f"정규성 만족 여부: {'만족' if 정규성_만족 else '불만족'}")

# 3) 등분산성 검정 (정규성 만족 시만)
if 정규성_만족:
    print("\n[3] 등분산성 검정 (Levene)")
    stat_lev, p_lev = levene(그룹A, 그룹B)
    print(f"p-value: {round(p_lev, 4)}")
    등분산_만족 = p_lev > 0.05
    print(f"등분산성 만족 여부: {'만족' if 등분산_만족 else '불만족'}")
else:
    print("\n[3] 등분산성 검정: 정규성 불만족으로 생략")
    등분산_만족 = False

# 4) 적절한 검정 방법 선택
print("\n[4] 검정 방법 선택")
if 정규성_만족:
    if 등분산_만족:
        검정방법 = "Student's t-test"
        print(f"선택된 방법: {검정방법} (정규성 O, 등분산 O)")
    else:
        검정방법 = "Welch's t-test"
        print(f"선택된 방법: {검정방법} (정규성 O, 등분산 X)")
else:
    검정방법 = "Mann-Whitney U"
    print(f"선택된 방법: {검정방법} (정규성 X)")

# 5-6) 검정 수행
print(f"\n[5-6] {검정방법} 수행")
if 검정방법 == "Student's t-test":
    통계량, p_value = ttest_ind(그룹A, 그룹B, equal_var=True)
elif 검정방법 == "Welch's t-test":
    통계량, p_value = ttest_ind(그룹A, 그룹B, equal_var=False)
else:  # Mann-Whitney U
    통계량, p_value = mannwhitneyu(그룹A, 그룹B, alternative='two-sided')

print(f"검정 통계량: {round(통계량, 3)}")
print(f"p-value: {round(p_value, 4)}")

# 7) 결론
print("\n[7] 결론 (유의수준 α=0.05)")
if p_value < 0.05:
    결론 = "유의한 차이가 있다"
    print(f"✓ {결론} (p-value = {round(p_value, 4)} < 0.05)")
else:
    결론 = "유의한 차이가 없다"
    print(f"✗ {결론} (p-value = {round(p_value, 4)} ≥ 0.05)")

# 8) 효과크기 (정규성 만족 시만)
if 정규성_만족:
    print("\n[8] 효과크기 (Cohen's d)")
    mean_diff = 그룹A.mean() - 그룹B.mean()
    pooled_std = np.sqrt(((len(그룹A)-1)*그룹A.std()**2 + (len(그룹B)-1)*그룹B.std()**2) / (len(그룹A) + len(그룹B) - 2))
    cohens_d = mean_diff / pooled_std
    print(f"Cohen's d: {round(cohens_d, 3)}")
    
    if abs(cohens_d) < 0.2:
        해석 = "작은 효과"
    elif abs(cohens_d) < 0.8:
        해석 = "중간 효과"
    else:
        해석 = "큰 효과"
    print(f"해석: {해석}")
else:
    print("\n[8] 효과크기: 정규성 불만족으로 계산 생략")

print("\n" + "="*60)
```
```

---

### 유형 2: 대응표본 t검정 (Paired Samples t-test)

#### 언제 사용?
- **동일 대상**에 대한 **두 번의 측정**
- 예시:
  - 약물 투여 전/후 혈압
  - 교육 전/후 점수
  - 운동 전/후 체중

#### 데이터 구조
```python
# 동일 대상에 대한 전/후 측정값 2개
df = pd.DataFrame({
    '피험자ID': [...],      # 식별자
    '사전측정': [65, 70, ...],  # 전 측정값
    '사후측정': [72, 75, ...]   # 후 측정값
})
```

#### 필수 사전검정
1. **정규성 검정** - 사전/사후 각각 또는 차이값
   ```python
   # 방법 1: 사전/사후 각각
   shapiro(df['사전측정'])
   shapiro(df['사후측정'])
   
   # 방법 2: 차이값
   차이 = df['사후측정'] - df['사전측정']
   shapiro(차이)
   ```

#### 검정 수행
```python
from scipy.stats import ttest_rel, wilcoxon

# 정규성 O → 대응표본 t검정
t_stat, p_value = ttest_rel(df['사전측정'], df['사후측정'])

# 정규성 X → Wilcoxon 부호순위 검정
stat, p_value = wilcoxon(df['사전측정'], df['사후측정'])
```

#### 질문 구성 (대응표본 t검정)
```
1) 사전측정과 사후측정의 평균과 표준편차를 각각 계산하시오.
2) 사전측정과 사후측정 데이터에 대해 Shapiro-Wilk 정규성 검정을 수행하시오.
   - 사전측정 p-value: 소수점 넷째 자리 반올림
   - 사후측정 p-value: 소수점 넷째 자리 반올림
3) 2)의 결과를 바탕으로 적절한 검정 방법을 선택하시오.
   - "대응표본 t검정" 또는 "Wilcoxon 부호순위 검정"
4) 3)에서 선택한 검정을 수행하고 검정 통계량을 소수점 셋째 자리에서 반올림하여 출력하시오.
5) p-value를 소수점 넷째 자리에서 반올림하여 출력하시오.
6) 유의수준 0.05에서 사전과 사후 간 유의한 차이가 있는지 판단하시오.
   - "유의한 차이가 있다" 또는 "유의한 차이가 없다"
7) (선택) 평균 차이와 95% 신뢰구간을 계산하시오.
```

#### 대응표본 t검정 문제 생성 템플릿

```markdown
# 대응표본 t검정 문제: [구체적 제목]

## 시나리오
[전후 비교 상황 설명 - 3-5문장]
- 어떤 처치/개입이 있었는지
- 동일 대상을 전후로 측정
- 효과를 검증하려는 목적

## 데이터 생성 코드
```python
import pandas as pd

df = pd.DataFrame({
    '[ID변수]': [f'PT{i:02d}' for i in range(1, 31)],  # 30명
    '[사전변수]': [145, 152, 148, 155, 150, 147, 153, 149, 156, 151,
                   146, 154, 158, 144, 149, 157, 152, 148, 155, 150,
                   147, 153, 159, 145, 151, 156, 148, 154, 150, 146],  # 완전한 리터럴 값
    '[사후변수]': [138, 145, 142, 148, 144, 140, 146, 143, 149, 145,
                   139, 147, 151, 137, 143, 150, 146, 141, 148, 144,
                   140, 146, 152, 138, 144, 149, 141, 147, 143, 139]   # 완전한 리터럴 값
})

print(df)
print(f"\n표본 크기: {len(df)}명")
```

## 질문

**1)** [사전변수]와 [사후변수]의 평균과 표준편차를 각각 계산하시오.
- [사전변수] 평균: 소수점 둘째 자리에서 반올림
- [사전변수] 표준편차: 소수점 둘째 자리에서 반올림
- [사후변수] 평균: 소수점 둘째 자리에서 반올림
- [사후변수] 표준편차: 소수점 둘째 자리에서 반올림

**2)** [사전변수]와 [사후변수] 각각에 대해 Shapiro-Wilk 정규성 검정을 수행하시오.
- [사전변수] p-value: 소수점 넷째 자리에서 반올림
- [사후변수] p-value: 소수점 넷째 자리에서 반올림

**3)** 2)의 결과를 바탕으로 적절한 검정 방법을 선택하시오.
- 정규성 만족 여부: "만족" 또는 "불만족"
- 선택한 검정 방법: "대응표본 t검정" 또는 "Wilcoxon 부호순위 검정"

**4)** 3)에서 선택한 검정을 수행하고 검정 통계량을 소수점 셋째 자리에서 반올림하여 출력하시오.

**5)** 4)에서 수행한 검정의 p-value를 소수점 넷째 자리에서 반올림하여 출력하시오.

**6)** 유의수준 0.05에서 [사전변수]와 [사후변수] 간에 유의한 차이가 있는지 판단하시오.
- 출력 형식: "유의한 차이가 있다" 또는 "유의한 차이가 없다"

**7)** (선택) 평균 차이([사후변수] - [사전변수])와 95% 신뢰구간을 계산하시오.
- 평균 차이: 소수점 둘째 자리 반올림
- 95% CI 하한: 소수점 둘째 자리 반올림
- 95% CI 상한: 소수점 둘째 자리 반올림

## 힌트

### 필요한 라이브러리
```python
import pandas as pd
import numpy as np
from scipy.stats import shapiro, ttest_rel, wilcoxon
from scipy import stats
```

### 주요 함수 사용법
1. **기술통계**
   ```python
   평균 = df['사전변수'].mean()
   표준편차 = df['사전변수'].std()
   ```

2. **정규성 검정**
   ```python
   stat, p = shapiro(df['사전변수'])
   # p > 0.05 → 정규분포 따름
   ```

3. **대응표본 t검정**
   ```python
   t_stat, p_value = ttest_rel(df['사전변수'], df['사후변수'])
   ```

4. **Wilcoxon 부호순위 검정** (정규성 불만족 시)
   ```python
   stat, p_value = wilcoxon(df['사전변수'], df['사후변수'])
   ```

5. **신뢰구간**
   ```python
   차이 = df['사후변수'] - df['사전변수']
   평균차이 = 차이.mean()
   표준오차 = stats.sem(차이)
   신뢰구간 = stats.t.interval(0.95, len(차이)-1, 평균차이, 표준오차)
   ```

### 의사결정 트리
```
정규성 검정 (사전 AND 사후)
├─ 둘 다 만족 (p > 0.05) → 대응표본 t검정
└─ 하나라도 불만족 (p ≤ 0.05) → Wilcoxon 부호순위 검정
```

### 흔한 실수
❌ 대응표본인데 독립표본 t검정 사용
❌ ttest_rel 함수에 그룹 분리한 데이터 입력
❌ 순서 바꿔서 입력 (사전-사후 순서 중요)

## 정답 코드
```python
import pandas as pd
import numpy as np
from scipy.stats import shapiro, ttest_rel, wilcoxon
from scipy import stats

# 데이터 (위와 동일하게 완전한 리터럴 값 사용)
df = pd.DataFrame({
    '[ID변수]': [f'PT{i:02d}' for i in range(1, 31)],
    '[사전변수]': [145, 152, 148, 155, 150, 147, 153, 149, 156, 151,
                   146, 154, 158, 144, 149, 157, 152, 148, 155, 150,
                   147, 153, 159, 145, 151, 156, 148, 154, 150, 146],
    '[사후변수]': [138, 145, 142, 148, 144, 140, 146, 143, 149, 145,
                   139, 147, 151, 137, 143, 150, 146, 141, 148, 144,
                   140, 146, 152, 138, 144, 149, 141, 147, 143, 139]
})

print("="*60)
print("대응표본 검정 분석 결과")
print("="*60)

# 1) 기술통계량
print("\n[1] 기술통계량")
print(f"[사전변수] 평균: {round(df['[사전변수]'].mean(), 2)}")
print(f"[사전변수] 표준편차: {round(df['[사전변수]'].std(), 2)}")
print(f"[사후변수] 평균: {round(df['[사후변수]'].mean(), 2)}")
print(f"[사후변수] 표준편차: {round(df['[사후변수]'].std(), 2)}")

# 2) 정규성 검정
print("\n[2] 정규성 검정 (Shapiro-Wilk)")
stat_pre, p_pre = shapiro(df['[사전변수]'])
stat_post, p_post = shapiro(df['[사후변수]'])
print(f"[사전변수] p-value: {round(p_pre, 4)}")
print(f"[사후변수] p-value: {round(p_post, 4)}")

정규성_만족 = (p_pre > 0.05) and (p_post > 0.05)
print(f"정규성 만족 여부: {'만족' if 정규성_만족 else '불만족'}")

# 3) 검정 방법 선택
print("\n[3] 검정 방법 선택")
if 정규성_만족:
    검정방법 = "대응표본 t검정"
    print(f"선택된 방법: {검정방법} (정규성 만족)")
else:
    검정방법 = "Wilcoxon 부호순위 검정"
    print(f"선택된 방법: {검정방법} (정규성 불만족)")

# 4-5) 검정 수행
print(f"\n[4-5] {검정방법} 수행")
if 검정방법 == "대응표본 t검정":
    통계량, p_value = ttest_rel(df['[사전변수]'], df['[사후변수]'])
else:
    통계량, p_value = wilcoxon(df['[사전변수]'], df['[사후변수]'])

print(f"검정 통계량: {round(통계량, 3)}")
print(f"p-value: {round(p_value, 4)}")

# 6) 결론
print("\n[6] 결론 (유의수준 α=0.05)")
if p_value < 0.05:
    결론 = "유의한 차이가 있다"
    print(f"✓ {결론} (p-value = {round(p_value, 4)} < 0.05)")
else:
    결론 = "유의한 차이가 없다"
    print(f"✗ {결론} (p-value = {round(p_value, 4)} ≥ 0.05)")

# 7) 평균 차이와 신뢰구간
print("\n[7] 평균 차이 및 95% 신뢰구간")
차이 = df['[사후변수]'] - df['[사전변수]']
평균차이 = 차이.mean()
표준오차 = stats.sem(차이)
신뢰구간 = stats.t.interval(0.95, len(차이)-1, 평균차이, 표준오차)

print(f"평균 차이 ([사후]-[사전]): {round(평균차이, 2)}")
print(f"95% 신뢰구간: [{round(신뢰구간[0], 2)}, {round(신뢰구간[1], 2)}]")

print("\n" + "="*60)
```
```

---

### 유형 3: 단일표본 t검정 (One Sample t-test)

#### 언제 사용?
- **한 그룹의 평균**이 **특정 기준값**과 같은지
- 예시:
  - 제품 무게가 표시 무게와 같은지
  - 평균 키가 전국 평균과 같은지
  - 평균 점수가 합격 기준과 같은지

#### 데이터 구조
```python
# 하나의 측정값 + 비교할 기준값
df = pd.DataFrame({
    '샘플ID': [...],
    '측정값': [98.5, 101.2, ...]  # 연속형
})
기준값 = 100  # 비교 대상
```

#### 필수 사전검정
1. **정규성 검정**
   ```python
   shapiro(df['측정값'])
   ```

#### 검정 수행
```python
from scipy.stats import ttest_1samp, wilcoxon

# 정규성 O → 단일표본 t검정
t_stat, p_value = ttest_1samp(df['측정값'], 기준값)

# 정규성 X → Wilcoxon 부호순위 검정
차이 = df['측정값'] - 기준값
stat, p_value = wilcoxon(차이)
```

#### 질문 구성 (단일표본 t검정)
```
1) 측정값의 평균, 표준편차, 샘플 크기를 출력하시오.
2) 측정값에 대해 Shapiro-Wilk 정규성 검정을 수행하시오.
   - p-value: 소수점 넷째 자리 반올림
3) 2)의 결과를 바탕으로 적절한 검정 방법을 선택하시오.
4) 측정값의 평균이 기준값([값])과 같은지 검정을 수행하시오.
   - 검정 통계량: 소수점 셋째 자리 반올림
5) p-value를 소수점 넷째 자리에서 반올림하여 출력하시오.
6) 유의수준 0.05에서 측정값의 평균이 기준값과 다른지 판단하시오.
   - "다르다" 또는 "같다"
```

#### 단일표본 t검정 문제 생성 템플릿

```markdown
# 단일표본 t검정 문제: [구체적 제목]

## 시나리오
[기준값과 비교하는 상황 - 3-5문장]
- 어떤 제품/대상의
- 어떤 특성을
- 표시된/공시된/평균 기준값과
- 같은지 검정하려는 상황

## 데이터 생성 코드
```python
import pandas as pd

df = pd.DataFrame({
    '[샘플ID]': [f'S{i:02d}' for i in range(1, 31)],  # 30개
    '[측정변수]': [98.5, 101.2, 99.8, 100.5, 97.3, 102.1, 100.8, 99.1, 98.9, 101.5,
                   100.2, 97.8, 99.5, 102.3, 98.1, 100.9, 101.8, 99.2, 97.6, 100.4,
                   99.7, 102.0, 98.3, 100.1, 101.1, 99.0, 97.9, 100.7, 98.6, 101.3]  # 완전한 리터럴 값
})

기준값 = 100  # 비교 대상

print(df)
print(f"\n기준값: {기준값}")
print(f"샘플 크기: {len(df)}")
```

## 질문

**1)** [측정변수]의 평균, 표준편차, 샘플 크기를 계산하시오.
- 평균: 소수점 둘째 자리에서 반올림
- 표준편차: 소수점 둘째 자리에서 반올림
- 샘플 크기: 정수

**2)** [측정변수]에 대해 Shapiro-Wilk 정규성 검정을 수행하시오.
- p-value: 소수점 넷째 자리에서 반올림

**3)** 2)의 결과를 바탕으로 적절한 검정 방법을 선택하시오.
- 정규성 만족 여부: "만족" 또는 "불만족"
- 선택한 검정 방법: "단일표본 t검정" 또는 "Wilcoxon 부호순위 검정"

**4)** 3)에서 선택한 검정을 수행하여 [측정변수]의 평균이 기준값({기준값})과 같은지 검정하시오.
- 검정 통계량: 소수점 셋째 자리에서 반올림

**5)** 4)에서 수행한 검정의 p-value를 소수점 넷째 자리에서 반올림하여 출력하시오.

**6)** 유의수준 0.05에서 [측정변수]의 평균이 기준값({기준값})과 다르다고 할 수 있는지 판단하시오.
- 출력 형식: "다르다" 또는 "같다"

## 힌트

### 필요한 라이브러리
```python
import pandas as pd
import numpy as np
from scipy.stats import shapiro, ttest_1samp, wilcoxon
```

### 주요 함수 사용법
1. **기술통계**
   ```python
   평균 = df['측정변수'].mean()
   표준편차 = df['측정변수'].std()
   샘플크기 = len(df)
   ```

2. **정규성 검정**
   ```python
   stat, p = shapiro(df['측정변수'])
   ```

3. **단일표본 t검정**
   ```python
   t_stat, p_value = ttest_1samp(df['측정변수'], 기준값)
   ```

4. **Wilcoxon 부호순위 검정** (정규성 불만족 시)
   ```python
   차이 = df['측정변수'] - 기준값
   stat, p_value = wilcoxon(차이)
   ```

### 의사결정 트리
```
정규성 검정
├─ 만족 (p > 0.05) → 단일표본 t검정
└─ 불만족 (p ≤ 0.05) → Wilcoxon 부호순위 검정
```

### 흔한 실수
❌ ttest_1samp 함수에 기준값 안 넣음
❌ Wilcoxon 검정 시 원본 데이터 사용 (차이값 사용해야 함)
❌ 양측검정 vs 단측검정 혼동

## 정답 코드
```python
import pandas as pd
import numpy as np
from scipy.stats import shapiro, ttest_1samp, wilcoxon

# 데이터 (위와 동일하게 완전한 리터럴 값 사용)
df = pd.DataFrame({
    '[샘플ID]': [f'S{i:02d}' for i in range(1, 31)],
    '[측정변수]': [98.5, 101.2, 99.8, 100.5, 97.3, 102.1, 100.8, 99.1, 98.9, 101.5,
                   100.2, 97.8, 99.5, 102.3, 98.1, 100.9, 101.8, 99.2, 97.6, 100.4,
                   99.7, 102.0, 98.3, 100.1, 101.1, 99.0, 97.9, 100.7, 98.6, 101.3]
})

기준값 = 100

print("="*60)
print("단일표본 검정 분석 결과")
print("="*60)

# 1) 기술통계량
print("\n[1] 기술통계량")
평균 = df['[측정변수]'].mean()
표준편차 = df['[측정변수]'].std()
샘플크기 = len(df)
print(f"평균: {round(평균, 2)}")
print(f"표준편차: {round(표준편차, 2)}")
print(f"샘플 크기: {샘플크기}")

# 2) 정규성 검정
print("\n[2] 정규성 검정 (Shapiro-Wilk)")
stat, p_norm = shapiro(df['[측정변수]'])
print(f"p-value: {round(p_norm, 4)}")

정규성_만족 = p_norm > 0.05
print(f"정규성 만족 여부: {'만족' if 정규성_만족 else '불만족'}")

# 3) 검정 방법 선택
print("\n[3] 검정 방법 선택")
if 정규성_만족:
    검정방법 = "단일표본 t검정"
    print(f"선택된 방법: {검정방법} (정규성 만족)")
else:
    검정방법 = "Wilcoxon 부호순위 검정"
    print(f"선택된 방법: {검정방법} (정규성 불만족)")

# 4-5) 검정 수행
print(f"\n[4-5] {검정방법} 수행")
print(f"H0: 평균 = {기준값}")
print(f"H1: 평균 ≠ {기준값}")

if 검정방법 == "단일표본 t검정":
    통계량, p_value = ttest_1samp(df['[측정변수]'], 기준값)
else:
    차이 = df['[측정변수]'] - 기준값
    통계량, p_value = wilcoxon(차이)

print(f"검정 통계량: {round(통계량, 3)}")
print(f"p-value: {round(p_value, 4)}")

# 6) 결론
print("\n[6] 결론 (유의수준 α=0.05)")
if p_value < 0.05:
    결론 = "다르다"
    print(f"✓ 평균이 기준값과 {결론} (p-value = {round(p_value, 4)} < 0.05)")
else:
    결론 = "같다"
    print(f"✗ 평균이 기준값과 {결론} (p-value = {round(p_value, 4)} ≥ 0.05)")

print("\n" + "="*60)
```
```

---

## 🎯 문제 생성 체크리스트

문제를 생성한 후 다음 항목을 확인하세요:

### 필수 확인 사항
- [ ] 데이터가 30-40행인가?
- [ ] np.random.seed() 포함되었는가?
- [ ] 변수명이 모두 한국어인가?
- [ ] 힌트 섹션이 포함되었는가?
- [ ] 정답 코드가 완전한가?
- [ ] 조건부 로직(if-else)이 포함되었는가?
- [ ] 소수점 자리수가 명시되었는가?
- [ ] print문에 설명이 포함되었는가?

### 품질 확인 사항
- [ ] 시나리오가 현실적인가?
- [ ] 질문이 단계적으로 구성되었는가?
- [ ] 의사결정 트리가 명확한가?
- [ ] 흔한 실수 경고가 있는가?
- [ ] 주석이 충분한가?

---

## 💡 문제 생성 예시 (완전한 예제)

다음은 위 템플릿을 따라 생성한 완전한 문제 예시입니다. 이 형식을 정확히 따라주세요.

[이어서 독립표본 t검정 완전한 예제를 작성...]
