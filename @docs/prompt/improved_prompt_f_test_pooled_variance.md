# 빅데이터분석기사 작업형 3유형 - F-검정 및 합동분산추정량 문제 생성 프롬프트

## 🚨🚨🚨 [최우선] 질문 형식 - 반드시 Q1. Q2. Q3. 형식 사용! 🚨🚨🚨

```
## ❓ 질문

Q1. [질문] (출력: 소수점 X자리)
Q2. [질문] (출력: 소수점 X자리)
Q3. [질문] (출력: 소수점 X자리)
```

**⛔ 절대 금지:** **1)**, **2)** 형식 / "## 질문" (이모지 없이)
**✅ 반드시:** "## ❓ 질문" 헤더 / Q1. Q2. Q3. 형식 / (출력: ...) 명시

---

## 📋 문제 구조 (순서 엄수)

모든 문제는 정확히 이 순서를 따라야 합니다:

```
# [제목]

## 시나리오
[2-3문장의 현실적인 상황]

## 데이터 생성 코드
```python
[30-40행의 완전한 리터럴 데이터]
```

## ❓ 질문

Q1. [질문] (출력: 소수점 X자리)
Q2. [질문] (출력: 소수점 X자리)
...

## 힌트
[라이브러리, 함수, 주의사항]

## 정답 코드
```python
[완전한 Python 코드]
```
```

---

## ⚙️ 데이터 생성 규칙

### 필수 조건
- ✅ 30-40행 (각 그룹 15-20개)
- ✅ pandas DataFrame으로만 생성
- ✅ **완전한 리터럴 값** (np.random 사용 절대 금지!)
- ✅ 변수명은 **무조건 한국어**
- ✅ 두 그룹 필요
- ❌ CSV 파일 생성 금지
- ❌ 외부 파일 읽기 금지
- ❌ np.random 절대 금지!

### 올바른 예시
```python
import pandas as pd

df = pd.DataFrame({
    '샘플ID': [f'S{i:02d}' for i in range(1, 41)],
    '그룹': ['A']*20 + ['B']*20,
    '측정값': [102.5, 98.3, 105.1, 99.7, 103.2, 100.8, 104.5, 97.9, 101.6, 99.2,
               103.8, 100.1, 102.3, 98.5, 104.9, 101.2, 99.8, 103.5, 100.4, 102.1,
               95.2, 97.8, 94.5, 98.1, 96.3, 95.7, 97.2, 94.9, 96.8, 95.4,
               97.5, 96.1, 95.8, 98.3, 94.6, 97.0, 96.5, 95.1, 97.9, 96.2]
})
```

**❌ 잘못된 예시 (절대 금지!):**
```python
# ❌ np.random 사용 금지!
np.random.seed(42)
그룹A_측정값 = np.random.normal(100, 5, 20)  # ← 이런 식으로 생성 금지!
```

---

## 📊 F-검정 및 합동분산추정량 개념

### 1. F-검정 (등분산성 검정)

**목적:** 두 그룹의 분산이 동일한지 검정

**공식:** F = s₁² / s₂² (항상 큰 분산 / 작은 분산)

**코드:**
```python
그룹A = df[df['그룹'] == 'A']['측정값']
그룹B = df[df['그룹'] == 'B']['측정값']

var_A = 그룹A.var(ddof=1)  # 표본분산 (ddof=1 필수!)
var_B = 그룹B.var(ddof=1)

F = var_A / var_B if var_A > var_B else var_B / var_A
```

**해석:**
- F ≈ 1: 등분산
- F >> 1: 분산 차이 큼

### 2. 합동분산추정량 (Pooled Variance)

**목적:** 등분산 가정 하에 두 그룹의 공통 분산 추정

**공식:**
- s²_p = [(n₁-1)s₁² + (n₂-1)s₂²] / (n₁+n₂-2)
- s_p = √s²_p

**코드:**
```python
n1 = len(그룹A)
n2 = len(그룹B)

s_p_sq = ((n1-1)*var_A + (n2-1)*var_B) / (n1 + n2 - 2)
s_p = np.sqrt(s_p_sq)
```

---

## 💡 질문 구성 (Q1~Q5)

### 기본 질문 패턴

```
Q1. 그룹A의 표본 분산을 소수점 3자리까지 구하시오. (출력: 소수점 3자리)
Q2. 그룹B의 표본 분산을 소수점 3자리까지 구하시오. (출력: 소수점 3자리)
Q3. F-검정 통계량 (큰 분산 / 작은 분산)을 소수점 3자리까지 구하시오. (출력: 소수점 3자리)
Q4. 두 그룹의 합동분산추정량 s²_p를 소수점 3자리까지 구하시오. (출력: 소수점 3자리)
Q5. 두 그룹의 합동표준편차 s_p를 소수점 3자리까지 구하시오. (출력: 소수점 3자리)
```

---

## 🎯 힌트 템플릿

```markdown
## 힌트

### 필요한 라이브러리
- pandas, numpy

### 주요 함수
1. 그룹 분리: `df[df['그룹'] == 'A']['측정값']`
2. 표본분산: `.var(ddof=1)` ← ddof=1 필수!
3. F통계량: `큰분산 / 작은분산`
4. 합동분산: `[(n₁-1)s₁² + (n₂-1)s₂²] / (n₁+n₂-2)`
5. 제곱근: `np.sqrt()`

### 흔한 실수
❌ .var() 사용 (모분산) → .var(ddof=1) 사용 (표본분산)
❌ F통계량 계산 시 작은 분산을 큰 분산으로 나눔
❌ 합동분산 공식에서 자유도 계산 오류
```

---

## 📝 정답 코드 템플릿

```python
import pandas as pd
import numpy as np

# 데이터 생성
df = pd.DataFrame({
    '샘플ID': [f'S{i:02d}' for i in range(1, 41)],
    '그룹': ['A']*20 + ['B']*20,
    '측정값': [102.5, 98.3, 105.1, 99.7, 103.2, 100.8, 104.5, 97.9, 101.6, 99.2,
               103.8, 100.1, 102.3, 98.5, 104.9, 101.2, 99.8, 103.5, 100.4, 102.1,
               95.2, 97.8, 94.5, 98.1, 96.3, 95.7, 97.2, 94.9, 96.8, 95.4,
               97.5, 96.1, 95.8, 98.3, 94.6, 97.0, 96.5, 95.1, 97.9, 96.2]
})

# 그룹 분리
그룹A = df[df['그룹'] == 'A']['측정값']
그룹B = df[df['그룹'] == 'B']['측정값']

# Q1-Q2: 표본분산
var_A = 그룹A.var(ddof=1)
var_B = 그룹B.var(ddof=1)
print(round(var_A, 3))
print(round(var_B, 3))

# Q3: F-검정 통계량
F = var_A / var_B if var_A > var_B else var_B / var_A
print(round(F, 3))

# Q4-Q5: 합동분산추정량
n1, n2 = len(그룹A), len(그룹B)
s_p_sq = ((n1-1)*var_A + (n2-1)*var_B) / (n1 + n2 - 2)
s_p = np.sqrt(s_p_sq)
print(round(s_p_sq, 3))
print(round(s_p, 3))
```

---

## 🔍 시나리오 예시

### 제조 품질
"한 제조업체에서 두 개의 생산 라인(A, B)에서 생산되는 제품의 무게 분산이 동일한지 확인하고자 합니다. 각 라인에서 20개씩 샘플을 추출하여 무게를 측정했습니다."

### 교육 평가
"두 반(A반, B반)의 시험 점수 분산이 동일한지 검증하기 위해 각 반에서 20명씩 학생을 선발하여 점수를 수집했습니다."

### 임상 시험
"두 가지 치료법(치료A, 치료B)의 효과 분산이 동일한지 확인하기 위해 각 그룹에서 18명씩 환자를 선정하여 혈압 변화를 측정했습니다."

### 농업 실험
"두 종류의 비료(비료A, 비료B)를 사용한 농작물의 수확량 분산이 동일한지 확인하기 위해 각 그룹에서 20개씩 구역을 측정했습니다."

---

## ⚠️ 주의사항

### 반드시 지킬 것
1. ✅ 리터럴 데이터만 사용 (np.random, CSV 읽기 금지!)
2. ✅ 변수명은 한국어
3. ✅ 각 그룹 15-20개 (총 30-40행)
4. ✅ "## ❓ 질문" 헤더 필수
5. ✅ Q1. Q2. Q3. 형식 사용
6. ✅ 표본분산 계산 시 `.var(ddof=1)` 사용

### 흔한 실수 방지
- ❌ **1)**, **2)** 형식 사용
- ❌ np.random 사용
- ❌ .var() 사용 (모분산) → .var(ddof=1) 필요
- ❌ F통계량 계산 시 분모/분자 반대
- ❌ 질문이 두 번 반복되는 구조

---

## 🚀 문제 생성 지침

위 모든 규칙을 따라, 다음 순서로 문제를 생성하세요:

1. **# [제목]** - 간결한 제목
2. **## 시나리오** - 2-3문장의 현실적 상황
3. **## 데이터 생성 코드** - 리터럴 값으로만, 두 그룹
4. **## ❓ 질문** - Q1~Q5 형식
5. **## 힌트** - 라이브러리, 함수, 주의사항
6. **## 정답 코드** - 완전한 실행 가능 코드

**중요: 질문 섹션은 단 한 번만 작성하세요!**

지금 바로 문제를 생성하세요!
