# 빅데이터분석기사 작업형 3유형 - 비율 z 검정 문제 생성 프롬프트

## 🚨🚨🚨 [최우선] 질문 형식 - 반드시 Q1. Q2. Q3. 형식 사용! 🚨🚨🚨

```
## ❓ 질문

Q1. [질문] (출력: 소수점 X자리)
Q2. [질문] (출력: 소수점 X자리)
Q3. [질문] (출력: 소수점 X자리)
Q4. [질문] (출력: 예/아니오)
```

**⛔ 절대 금지:** **1)**, **2)** 형식 / "## 질문" (이모지 없이)
**✅ 반드시:** "## ❓ 질문" 헤더 / Q1. Q2. Q3. 형식 / (출력: ...) 명시

---

## 📋 문제 구조 (순서 엄수)

```
# [제목]

## 시나리오
[2-3문장의 현실적인 상황]

## 데이터 생성 코드
```python
[30-40행의 완전한 리터럴 데이터]
```

## ❓ 질문

Q1. [질문] (출력: 소수점 X자리)
Q2. [질문] (출력: 소수점 X자리)
...

## 힌트
[라이브러리, 함수, 주의사항]

## 정답 코드
```python
[완전한 Python 코드]
```
```

---

## ⚙️ 데이터 생성 규칙

### 필수 조건
- ✅ 30-40행 데이터
- ✅ pandas DataFrame으로만 생성
- ✅ **완전한 리터럴 값** (np.random 사용 절대 금지)
- ✅ 변수명은 **무조건 한국어**
- ✅ 범주형 변수 (예: '성공'/'실패', '찬성'/'반대', '통과'/'불합격')
- ❌ CSV 파일 생성 금지
- ❌ 외부 파일 읽기 금지

### 올바른 예시
```python
import pandas as pd

df = pd.DataFrame({
    '샘플ID': [f'S{i:02d}' for i in range(1, 41)],
    '결과': ['성공']*18 + ['실패']*22
})
```

---

## 📊 비율 z 검정 개념

### 언제 사용하는가?
- **한 집단의 비율**을 **특정 기준 비율**과 비교
- 예: 제품 불량률이 10%인지 검정, 합격률이 50%와 다른지 검정

### 귀무가설과 대립가설
- **H₀ (귀무가설)**: 모비율 p = p₀ (기준 비율)
- **H₁ (대립가설)**: 모비율 p ≠ p₀ (양측검정)

### 검정 통계량
```
z = (p̂ - p₀) / √(p₀(1-p₀)/n)

p̂: 표본비율 (성공 횟수 / 전체 샘플 수)
p₀: 기준 비율 (귀무가설의 비율)
n: 샘플 크기
```

### 판단 기준
- p-value > 0.05 → 귀무가설 채택 (비율 차이 없음)
- p-value ≤ 0.05 → 귀무가설 기각 (비율 차이 있음)

---

## 💻 Python 코드 구현

### 방법 1: statsmodels.stats.proportion.proportions_ztest (권장)

```python
from statsmodels.stats.proportion import proportions_ztest

# 데이터 집계
성공_횟수 = (df['결과'] == '성공').sum()
전체_샘플수 = len(df)
기준_비율 = 0.5

# 비율 z 검정
stat, pval = proportions_ztest(
    count=성공_횟수,
    nobs=전체_샘플수,
    value=기준_비율,
    alternative='two-sided'  # 양측검정
)
```

### 방법 2: 수동 계산

```python
import numpy as np
from scipy.stats import norm

# 표본비율 계산
p_hat = 성공_횟수 / 전체_샘플수
p0 = 기준_비율

# z 통계량 계산
z_stat = (p_hat - p0) / np.sqrt(p0 * (1 - p0) / 전체_샘플수)

# p-value 계산 (양측검정)
pval = 2 * (1 - norm.cdf(abs(z_stat)))
```

---

## 💡 질문 구성 (Q1~Q5)

### 기본 질문 패턴

```
## ❓ 질문

Q1. '성공' 결과의 빈도를 구하시오. (출력: 정수)
Q2. 전체 샘플 중 '성공' 비율을 소수점 4자리까지 구하시오. (출력: 소수점 4자리)
Q3. 기준 비율 0.5와 비교하는 비율 z 검정의 검정통계량을 구하시오. (출력: 소수점 3자리)
Q4. 비율 z 검정의 p-value를 소수점 4자리까지 구하시오. (출력: 소수점 4자리)
Q5. 유의수준 0.05에서 표본비율이 기준비율 0.5와 다르다고 할 수 있는지 판단하시오. (출력: "다르다" 또는 "같다")
```

---

## 🎯 힌트 템플릿

```markdown
## 힌트

### 필요한 라이브러리
- pandas
- statsmodels.stats.proportion: proportions_ztest

### 주요 함수
1. 빈도 계산: `(df['결과'] == '성공').sum()`
2. 비율 계산: `빈도 / len(df)`
3. 비율 z 검정: `proportions_ztest(count, nobs, value, alternative='two-sided')`

### 판단 기준
- p > 0.05 → 비율 차이 없음
- p ≤ 0.05 → 비율 차이 있음

### 흔한 실수
❌ count에 비율을 전달 (빈도를 전달해야 함)
❌ alternative 파라미터 누락 (기본값은 'two-sided')
❌ p-value 해석 오류 (p < 0.05일 때 차이 없음 ← 틀림)
```

---

## 📝 정답 코드 템플릿

```python
import pandas as pd
from statsmodels.stats.proportion import proportions_ztest

# 데이터 생성
df = pd.DataFrame({
    '샘플ID': [f'S{i:02d}' for i in range(1, 41)],
    '결과': ['성공']*18 + ['실패']*22
})

# Q1: 성공 빈도
성공_횟수 = (df['결과'] == '성공').sum()
print(성공_횟수)

# Q2: 성공 비율
성공_비율 = 성공_횟수 / len(df)
print(round(성공_비율, 4))

# Q3-Q4: 비율 z 검정
기준_비율 = 0.5
stat, pval = proportions_ztest(
    count=성공_횟수,
    nobs=len(df),
    value=기준_비율,
    alternative='two-sided'
)
print(round(stat, 3))
print(round(pval, 4))

# Q5: 결론
print("다르다" if pval < 0.05 else "같다")
```

---

## 🔍 시나리오 예시

### 품질 관리
"한 공장에서 생산되는 제품의 불량률이 10%라고 알려져 있습니다. 최근 생산 공정을 개선한 후 무작위로 40개 제품을 검사한 결과, 실제 불량률이 기준과 다른지 확인하고자 합니다."

### 마케팅 조사
"신제품 출시 전 소비자 조사에서 구매 의향이 50%라고 예상했습니다. 실제 출시 후 40명의 소비자를 대상으로 조사한 결과, 실제 구매 의향이 예상과 다른지 검증하고자 합니다."

### 교육 평가
"한 교육 프로그램의 합격률이 60%라고 알려져 있습니다. 올해 새로운 교육 방식을 도입한 후 35명의 수강생을 대상으로 시험을 실시했습니다. 합격률이 기준과 달라졌는지 확인하고자 합니다."

### 의학 연구
"특정 질병의 자연 치유율이 40%라고 알려져 있습니다. 새로운 치료법을 적용한 환자 30명 중 치유된 환자 수를 조사하여, 치료법이 치유율에 영향을 미치는지 검증하고자 합니다."

---

## ⚠️ 주의사항

### 반드시 지킬 것
1. ✅ 리터럴 데이터만 사용 (np.random 금지)
2. ✅ 변수명은 한국어
3. ✅ 30-40개 샘플
4. ✅ "## ❓ 질문" 헤더 필수
5. ✅ Q1. Q2. Q3. 형식 사용
6. ✅ 범주형 변수 (성공/실패, 찬성/반대 등)

### proportions_ztest 파라미터
- `count`: 성공 빈도 (정수)
- `nobs`: 전체 샘플 크기 (정수)
- `value`: 기준 비율 (0~1 사이 실수)
- `alternative`: 'two-sided' (양측), 'larger' (단측 >), 'smaller' (단측 <)

### 흔한 실수 방지
- ❌ **1)**, **2)** 형식 사용
- ❌ count에 비율을 전달 (빈도여야 함)
- ❌ p-value 해석 반대로 (p < 0.05 = 차이 없음 ← 틀림)
- ❌ alternative 파라미터 누락

---

## 🚀 문제 생성 지침

위 모든 규칙을 따라, 다음 순서로 문제를 생성하세요:

1. **# [제목]** - 간결한 제목
2. **## 시나리오** - 2-3문장의 현실적 상황
3. **## 데이터 생성 코드** - 리터럴 값으로만
4. **## ❓ 질문** - Q1~Q5 형식
5. **## 힌트** - 라이브러리, 함수, 주의사항
6. **## 정답 코드** - 완전한 실행 가능 코드

지금 바로 문제를 생성하세요!
