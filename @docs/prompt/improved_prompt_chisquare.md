# 빅데이터분석기사 작업형 3유형 - 카이제곱 검정 문제 생성 프롬프트

## 🚨🚨🚨 [최우선] 질문 형식 - 반드시 이 형식을 따르세요! 🚨🚨🚨

**생성할 문제의 질문 섹션은 반드시 다음 형식이어야 합니다:**

```
## ❓ 질문

Q1. [첫 번째 구체적인 질문] (출력: 소수점 X자리)
Q2. [두 번째 구체적인 질문] (출력: 소수점 X자리)
Q3. [세 번째 구체적인 질문] (출력: 예/아니오)
```

**⛔ 절대 금지:**
- ❌ **1)**, **2)**, **3)** 형식 사용 금지
- ❌ "## 질문" (이모지 없이) 사용 금지
- ❌ "검정하시오" 같은 모호한 표현

**✅ 반드시 포함:**
- ✅ "## ❓ 질문" 헤더 (이모지 포함)
- ✅ Q1. Q2. Q3. Q4. 형식 (최소 3개, 최대 6개)
- ✅ 각 질문에 (출력: ...) 명시

---

## 📋 문제 구조

```
# [제목]

## 시나리오
[두 범주형 변수의 독립성/연관성을 검정하는 상황]

## 데이터 생성 코드
```python
[30-50행의 리터럴 데이터, 두 범주형 변수]
```

## ❓ 질문

Q1. [질문] (출력: 소수점 X자리)
...

## 힌트

## 정답 코드
```python
[완전한 Python 코드]
```
```

---

## ⚙️ 데이터 생성 규칙

### 필수 조건
- ✅ **두 개의 범주형 변수** (예: 성별/선호도, 지역/구매여부)
- ✅ 30-50행
- ✅ 리터럴 값 (np.random 금지)
- ✅ 변수명 한국어

### 올바른 예시
```python
import pandas as pd

df = pd.DataFrame({
    '고객ID': [f'C{i:03d}' for i in range(1, 51)],
    '성별': ['남성']*25 + ['여성']*25,
    '선호제품': ['A', 'B', 'A', 'C', 'B', 'A', 'C', 'A', 'B', 'C',
                 'A', 'B', 'A', 'C', 'B', 'A', 'C', 'A', 'B', 'C',
                 'A', 'B', 'A', 'C', 'B',
                 'B', 'A', 'C', 'B', 'A', 'C', 'B', 'A', 'C', 'B',
                 'A', 'C', 'B', 'A', 'C', 'B', 'A', 'C', 'B', 'A',
                 'C', 'B', 'A', 'C', 'B']
})
```

---

## 📊 카이제곱 검정 분석 단계

### 1단계: 교차표 생성
```python
crosstab = pd.crosstab(df['성별'], df['선호제품'])
```

**주의:** raw 데이터가 주어진 경우 반드시 `pd.crosstab()`으로 먼저 변환!

### 2단계: 카이제곱 독립성 검정
```python
from scipy.stats import chi2_contingency

chi2, pval, dof, expected = chi2_contingency(crosstab)

# chi2: 카이제곱 통계량
# pval: p-value
# dof: 자유도
# expected: 기대빈도
```

### 3단계: 결론
```
p-value < 0.05 → 두 변수는 독립이 아니다 (연관성 있음)
p-value ≥ 0.05 → 두 변수는 독립이다 (연관성 없음)
```

---

## 💡 질문 예시

```
## ❓ 질문

Q1. 교차표를 생성하고, '남성'-'제품A' 셀의 관측빈도를 구하시오. (출력: 정수)
Q2. 카이제곱 검정 통계량을 구하시오. (출력: 소수점 3자리)
Q3. 카이제곱 검정 p-value를 구하시오. (출력: 소수점 4자리)
Q4. 자유도를 구하시오. (출력: 정수)
Q5. 유의수준 0.05에서 성별과 선호제품 간 독립성을 판단하시오. (출력: "독립" 또는 "독립 아님")
```

---

## 🎯 힌트 섹션 예시

```markdown
## 힌트

### 필요한 라이브러리
- pandas
- scipy.stats: chi2_contingency

### 주요 함수
1. 교차표 생성: `pd.crosstab(df['변수1'], df['변수2'])`
2. 카이제곱 검정: `chi2_contingency(교차표)`
3. 결과 해석: p < 0.05 → 독립 아님 (연관 있음)

### 흔한 실수
❌ raw 데이터를 chi2_contingency에 바로 입력
❌ p-value 해석 오류 (p < 0.05면 독립 아님)
❌ 기대빈도 5 미만 셀 많을 때 주의 필요
```

---

## 💻 정답 코드 예시

```python
import pandas as pd
from scipy.stats import chi2_contingency

# 데이터 생성
df = pd.DataFrame({
    '고객ID': [f'C{i:03d}' for i in range(1, 51)],
    '성별': ['남성']*25 + ['여성']*25,
    '선호제품': ['A', 'B', 'A', 'C', 'B', 'A', 'C', 'A', 'B', 'C',
                 'A', 'B', 'A', 'C', 'B', 'A', 'C', 'A', 'B', 'C',
                 'A', 'B', 'A', 'C', 'B',
                 'B', 'A', 'C', 'B', 'A', 'C', 'B', 'A', 'C', 'B',
                 'A', 'C', 'B', 'A', 'C', 'B', 'A', 'C', 'B', 'A',
                 'C', 'B', 'A', 'C', 'B']
})

# Q1: 교차표 생성
crosstab = pd.crosstab(df['성별'], df['선호제품'])
print(crosstab.loc['남성', 'A'])

# Q2-Q4: 카이제곱 검정
chi2, pval, dof, expected = chi2_contingency(crosstab)
print(round(chi2, 3))
print(round(pval, 4))
print(dof)

# Q5: 독립성 판단
print("독립" if pval >= 0.05 else "독립 아님")
```

---

## ✅ 생성 체크리스트

- [ ] "## ❓ 질문" 헤더 (이모지 포함)
- [ ] Q1. Q2. Q3. 형식
- [ ] 두 범주형 변수
- [ ] 30-50행 데이터
- [ ] pd.crosstab 사용
- [ ] print 문 최소화
