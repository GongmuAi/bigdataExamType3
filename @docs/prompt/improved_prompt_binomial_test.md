# 빅데이터분석기사 작업형 3유형 - 이항검정 문제 생성 프롬프트

## 🚨🚨🚨 [최우선] 질문 형식 - 반드시 Q1. Q2. Q3. 형식 사용! 🚨🚨🚨

```
## ❓ 질문

Q1. [질문] (출력: 소수점 X자리)
Q2. [질문] (출력: 소수점 X자리)
Q3. [질문] (출력: 예/아니오)
```

**⛔ 절대 금지:** **1)**, **2)** 형식 / "## 질문" (이모지 없이)
**✅ 반드시:** "## ❓ 질문" 헤더 / Q1. Q2. Q3. 형식 / (출력: ...) 명시

---

## 📋 문제 구조 (순서 엄수)

```
# [제목]

## 시나리오
[2-3문장의 현실적인 상황]

## 데이터 생성 코드
```python
[20-30행의 완전한 리터럴 데이터]
```

## ❓ 질문

Q1. [질문] (출력: 소수점 X자리)
Q2. [질문] (출력: 소수점 X자리)
Q3. [질문] (출력: 예/아니오)

## 힌트
[라이브러리, 함수, 주의사항]

## 정답 코드
```python
[완전한 Python 코드]
```
```

---

## ⚙️ 데이터 생성 규칙

### 필수 조건
- ✅ 20-30행 데이터 (이항검정은 샘플 수가 작을 때 사용)
- ✅ pandas DataFrame으로만 생성
- ✅ **완전한 리터럴 값** (np.random 사용 절대 금지)
- ✅ 변수명은 **무조건 한국어**
- ✅ 범주형 변수 (예: '성공'/'실패', '양성'/'음성', '부작용'/'정상')
- ❌ CSV 파일 생성 금지
- ❌ 외부 파일 읽기 금지

### 올바른 예시
```python
import pandas as pd

df = pd.DataFrame({
    '환자ID': [f'P{i:02d}' for i in range(1, 26)],
    '결과': ['부작용']*3 + ['정상']*22
})
```

---

## 📊 이항검정 개념

### 언제 사용하는가?
- **샘플 수가 작을 때** (n < 30) 비율 검정
- 비율 z 검정의 정확한 대안 (큰 샘플 근사 없이 정확한 확률 계산)

### 귀무가설과 대립가설
- **H₀ (귀무가설)**: 모비율 p = p₀ (기준 비율)
- **H₁ (대립가설)**: 모비율 p ≠ p₀ (양측검정)

### 검정 방법
- 이항분포를 사용하여 정확한 p-value 계산
- 샘플 수가 작아도 정확한 결과 제공

### 판단 기준
- p-value > 0.05 → 귀무가설 채택 (비율 차이 없음)
- p-value ≤ 0.05 → 귀무가설 기각 (비율 차이 있음)

---

## 💻 Python 코드 구현

### scipy.stats.binom_test (SciPy < 1.7)

```python
from scipy.stats import binom_test

# 데이터 집계
성공_횟수 = (df['결과'] == '부작용').sum()
전체_샘플수 = len(df)
기준_비율 = 0.1

# 이항검정
pval = binom_test(
    x=성공_횟수,
    n=전체_샘플수,
    p=기준_비율,
    alternative='two-sided'  # 양측검정
)
```

### scipy.stats.binomtest (SciPy >= 1.7, 권장)

```python
from scipy.stats import binomtest

# 이항검정 (새 버전)
result = binomtest(
    k=성공_횟수,
    n=전체_샘플수,
    p=기준_비율,
    alternative='two-sided'
)
pval = result.pvalue
```

---

## 💡 질문 구성 (Q1~Q3)

### 기본 질문 패턴

```
## ❓ 질문

Q1. 전체 샘플 중 '부작용' 발생 비율을 소수점 4자리까지 구하시오. (출력: 소수점 4자리)
Q2. 기준 비율 0.1과 비교하는 이항검정의 p-value를 소수점 4자리까지 구하시오. (출력: 소수점 4자리)
Q3. 유의수준 0.05에서 실제 부작용 발생률이 기준비율과 다르다고 할 수 있는지 판단하시오. (출력: "다르다" 또는 "같다")
```

---

## 🎯 힌트 템플릿

```markdown
## 힌트

### 필요한 라이브러리
- pandas
- scipy.stats: binomtest (또는 binom_test)

### 주요 함수
1. 빈도 계산: `(df['결과'] == '성공').sum()`
2. 비율 계산: `빈도 / len(df)`
3. 이항검정 (신버전): `binomtest(k=성공횟수, n=전체, p=기준비율)`
4. 이항검정 (구버전): `binom_test(x=성공횟수, n=전체, p=기준비율)`

### 판단 기준
- p > 0.05 → 비율 차이 없음
- p ≤ 0.05 → 비율 차이 있음

### 흔한 실수
❌ k(성공 횟수) 대신 비율을 전달
❌ alternative 파라미터 잘못 설정
❌ SciPy 버전에 따른 함수 선택 오류 (binom_test vs binomtest)
```

---

## 📝 정답 코드 템플릿

### 신버전 (SciPy >= 1.7)

```python
import pandas as pd
from scipy.stats import binomtest

# 데이터 생성
df = pd.DataFrame({
    '환자ID': [f'P{i:02d}' for i in range(1, 26)],
    '결과': ['부작용']*3 + ['정상']*22
})

# Q1: 부작용 발생 비율
부작용_횟수 = (df['결과'] == '부작용').sum()
부작용_비율 = 부작용_횟수 / len(df)
print(round(부작용_비율, 4))

# Q2: 이항검정
기준_비율 = 0.1
result = binomtest(k=부작용_횟수, n=len(df), p=기준_비율, alternative='two-sided')
print(round(result.pvalue, 4))

# Q3: 결론
print("다르다" if result.pvalue < 0.05 else "같다")
```

### 구버전 (SciPy < 1.7)

```python
import pandas as pd
from scipy.stats import binom_test

# 데이터 생성
df = pd.DataFrame({
    '환자ID': [f'P{i:02d}' for i in range(1, 26)],
    '결과': ['부작용']*3 + ['정상']*22
})

# Q1: 부작용 발생 비율
부작용_횟수 = (df['결과'] == '부작용').sum()
부작용_비율 = 부작용_횟수 / len(df)
print(round(부작용_비율, 4))

# Q2: 이항검정
기준_비율 = 0.1
pval = binom_test(x=부작용_횟수, n=len(df), p=기준_비율, alternative='two-sided')
print(round(pval, 4))

# Q3: 결론
print("다르다" if pval < 0.05 else "같다")
```

---

## 🔍 시나리오 예시

### 의학 연구
"한 제약회사에서 개발한 신약의 부작용 발생률이 기존 10%와 다른지 확인하고자 합니다. 25명의 환자를 대상으로 임상시험을 진행한 결과를 분석하려고 합니다."

### 품질 관리
"한 공장에서 생산되는 제품의 불량률이 5%라고 알려져 있습니다. 오늘 생산된 제품 중 무작위로 20개를 검사하여 실제 불량률이 기준과 다른지 검증하고자 합니다."

### 교육 평가
"온라인 시험의 부정행위 발생률이 2%라고 추정됩니다. 최근 실시한 시험에서 30명 중 부정행위자가 발견되었는지 조사하여 실제 발생률이 추정치와 다른지 확인하고자 합니다."

### 마케팅
"신제품 구매 의향이 15%라고 예상했습니다. 시제품 출시 후 28명의 소비자를 대상으로 조사한 결과, 실제 구매 의향이 예상과 다른지 검증하고자 합니다."

---

## ⚠️ 주의사항

### 반드시 지킬 것
1. ✅ 리터럴 데이터만 사용 (np.random 금지)
2. ✅ 변수명은 한국어
3. ✅ 20-30개 샘플 (작은 샘플)
4. ✅ "## ❓ 질문" 헤더 필수
5. ✅ Q1. Q2. Q3. 형식 사용
6. ✅ 범주형 변수 (성공/실패, 부작용/정상 등)

### 이항검정 vs 비율 z 검정
- **이항검정**: n < 30, 정확한 계산
- **비율 z 검정**: n ≥ 30, 정규분포 근사

### SciPy 버전별 함수
- **SciPy < 1.7**: `binom_test(x, n, p)`
- **SciPy >= 1.7**: `binomtest(k, n, p)` (권장)

### 흔한 실수 방지
- ❌ **1)**, **2)** 형식 사용
- ❌ k/x에 비율을 전달 (빈도여야 함)
- ❌ 큰 샘플(n > 50)에 이항검정 사용 (비율 z 검정 사용 권장)
- ❌ p-value 해석 반대로

---

## 🚀 문제 생성 지침

위 모든 규칙을 따라, 다음 순서로 문제를 생성하세요:

1. **# [제목]** - 간결한 제목
2. **## 시나리오** - 2-3문장의 현실적 상황
3. **## 데이터 생성 코드** - 리터럴 값으로만, 20-30개 샘플
4. **## ❓ 질문** - Q1~Q3 형식
5. **## 힌트** - 라이브러리, 함수, 주의사항
6. **## 정답 코드** - 완전한 실행 가능 코드 (binomtest 사용)

지금 바로 문제를 생성하세요!
