# 빅데이터분석기사 작업형 3유형 - 다중선형회귀분석 문제 생성 프롬프트

## 🚨🚨🚨 [최우선] 질문 형식 - 반드시 이 형식을 따르세요! 🚨🚨🚨

**생성할 문제의 질문 섹션은 반드시 다음 형식이어야 합니다:**

```
## ❓ 질문

Q1. [첫 번째 구체적인 질문] (출력: 소수점 X자리)
Q2. [두 번째 구체적인 질문] (출력: 소수점 X자리)
Q3. [세 번째 구체적인 질문] (출력: 소수점 X자리)
Q4. [네 번째 구체적인 질문] (출력: 예/아니오)
Q5. [다섯 번째 구체적인 질문] (출력: 소수점 X자리)
```

**⛔ 절대 금지:**
- ❌ **1)**, **2)**, **3)** 형식 사용 금지
- ❌ "## 질문" (이모지 없이) 사용 금지 → 반드시 "## ❓ 질문"
- ❌ "회귀분석 하시오", "모델을 만드시오" 같은 모호한 표현
- ❌ 출력 형식 명시 없이 질문만 작성

**✅ 반드시 포함:**
- ✅ "## ❓ 질문" 헤더 (이모지 포함)
- ✅ Q1. Q2. Q3. Q4. Q5. 형식 (최소 4개, 최대 7개)
- ✅ 각 질문 끝에 (출력: 소수점 X자리) 형식 명시
- ✅ 한 줄에 하나의 질문

---

## 📋 문제 구조 (순서 엄수)

모든 문제는 정확히 이 순서를 따라야 합니다:

```
# [제목]

## 시나리오
[Y를 예측하기 위해 X1, X2, X3 사용하는 2-3문장의 현실적 상황]

## 데이터 생성 코드
```python
[30-50행의 완전한 리터럴 데이터, 1개 종속변수 + 2-4개 독립변수]
```

## ❓ 질문

Q1. [질문] (출력: 소수점 X자리)
Q2. [질문] (출력: 소수점 X자리)
Q3. [질문] (출력: 예/아니오)
...

## 힌트
[라이브러리, 함수, 주의사항]

## 정답 코드
```python
[완전한 Python 코드]
```
```

---

## ⚙️ 데이터 생성 규칙

### 필수 조건
- ✅ 30-50행 데이터
- ✅ **종속변수 1개** (연속형, Y - 예측하려는 값)
- ✅ **독립변수 2-4개** (연속형, X1, X2, X3... - 예측에 사용할 변수)
- ✅ pandas DataFrame으로만 생성
- ✅ **완전한 리터럴 값** (np.random 사용 절대 금지)
- ✅ 변수명은 **무조건 한국어**
- ❌ CSV 파일 생성 금지
- ❌ 외부 파일 읽기 금지

### 올바른 예시
```python
import pandas as pd

df = pd.DataFrame({
    '지점ID': [f'S{i:02d}' for i in range(1, 41)],
    '광고비': [100, 120, 90, 150, 110, 130, 140, 105, 125, 145,
               95, 135, 115, 155, 100, 140, 120, 110, 145, 125,
               105, 150, 130, 115, 135, 125, 140, 110, 155, 120,
               130, 145, 115, 125, 140, 105, 150, 135, 120, 160],
    '매장수': [5, 6, 4, 8, 5, 7, 7, 5, 6, 8,
               4, 7, 5, 9, 5, 7, 6, 5, 8, 6,
               5, 8, 7, 5, 7, 6, 7, 5, 9, 6,
               7, 8, 5, 6, 7, 5, 8, 7, 6, 9],
    '직원수': [10, 12, 8, 15, 10, 13, 14, 10, 12, 15,
               8, 14, 11, 17, 10, 14, 12, 10, 15, 12,
               10, 16, 13, 11, 14, 12, 14, 10, 17, 12,
               13, 15, 11, 12, 14, 10, 16, 14, 12, 18],
    '매출액': [500, 580, 450, 720, 520, 650, 680, 510, 600, 700,
               470, 670, 540, 750, 510, 690, 590, 530, 710, 610,
               520, 730, 640, 550, 660, 600, 680, 540, 760, 590,
               650, 710, 560, 610, 690, 520, 740, 670, 600, 780]
})
```

---

## 📊 다중선형회귀 개념

### 언제 사용하는가?
- **연속형 종속변수(Y)를 여러 독립변수(X1, X2, X3...)로 예측**할 때
- 예: 광고비, 매장수, 직원수로 매출액 예측
- 목적: **각 변수의 영향력 파악 (추론)** 또는 **새로운 값 예측 (예측)**

### 회귀식
```
Y = β₀ + β₁X₁ + β₂X₂ + β₃X₃ + ε

β₀: 절편 (intercept)
β₁, β₂, β₃: 회귀계수 (각 변수의 영향력)
ε: 오차항
```

### 핵심 개념

**1. 회귀계수 (Coefficients)**
- 다른 변수를 고정했을 때, 해당 변수가 1단위 증가할 때 Y의 변화량
- 예: β₁ = 3.5 → 광고비 1만원 증가 시 매출 3.5만원 증가

**2. R² (결정계수)**
- 모델의 설명력 (0~1 사이 값)
- 0.8 → 모델이 Y 변동의 80%를 설명
- 높을수록 좋음 (일반적으로 0.7 이상이면 우수)

**3. p-value (유의확률)**
- 변수가 통계적으로 유의한지 판단
- p < 0.05 → 유의함 (해당 변수가 Y에 영향을 줌)
- p ≥ 0.05 → 유의하지 않음 (영향 없음)

---

## 💻 Python 구현 (statsmodels)

### 필수: sm.add_constant() 사용!

```python
import pandas as pd
import statsmodels.api as sm

# 데이터 준비
df = pd.DataFrame({...})

# X, y 분리
X = df[['광고비', '매장수', '직원수']]
y = df['매출액']

# ⚠️ 절편 추가 (필수!)
X = sm.add_constant(X)

# OLS 모델 적합
model = sm.OLS(y, X).fit()

# 주요 결과
model.summary()       # 전체 요약
model.params          # 회귀계수
model.pvalues         # p-value
model.rsquared        # R²
model.predict(새로운X)  # 예측값
```

### 주의: sklearn의 LinearRegression()과의 차이

**statsmodels (OLS)** - 추론용, 빅분기 시험 출제
- `sm.add_constant()` 필요
- `model.params`, `model.pvalues`, `model.rsquared` 제공
- 통계적 추론에 적합

**sklearn (LinearRegression)** - 예측용
- 자동으로 절편 추가
- `model.coef_`, `model.intercept_` 제공
- 머신러닝 파이프라인에 적합

---

## 💡 질문 구성 패턴

### 기본 질문 (회귀계수, p-value, R²)

```
## ❓ 질문

Q1. '광고비' 변수의 회귀계수를 소수점 3자리까지 구하시오. (출력: 소수점 3자리)
Q2. '광고비' 변수의 p-value를 소수점 4자리까지 구하시오. (출력: 소수점 4자리)
Q3. '매장수' 변수가 유의수준 0.05에서 유의한지 판단하시오. (출력: "유의" 또는 "유의하지 않음")
Q4. 모델의 R²를 소수점 3자리까지 구하시오. (출력: 소수점 3자리)
```

### 고급 질문 (예측 포함)

```
## ❓ 질문

Q1. '광고비' 변수의 회귀계수를 구하시오. (출력: 소수점 3자리)
Q2. 절편(const)의 값을 구하시오. (출력: 소수점 2자리)
Q3. 유의수준 0.05에서 유의한 변수의 개수를 구하시오. (출력: 정수)
Q4. 모델의 R²를 구하시오. (출력: 소수점 3자리)
Q5. 광고비=120, 매장수=6, 직원수=12일 때 예측 매출액을 구하시오. (출력: 소수점 2자리)
Q6. 모든 회귀계수 중 절대값이 가장 큰 변수명을 구하시오. (출력: "변수명")
```

---

## 🎯 힌트 템플릿

```markdown
## 힌트

### 필요한 라이브러리
- pandas
- statsmodels.api as sm

### 주요 함수
1. 절편 추가: `sm.add_constant(X)` ← 반드시!
2. 모델 적합: `sm.OLS(y, X).fit()`
3. 회귀계수: `model.params['변수명']` 또는 `model.params['const']` (절편)
4. p-value: `model.pvalues['변수명']`
5. R²: `model.rsquared`
6. 예측: `model.predict(새로운X)` (새로운X에도 const 컬럼 필수)

### 판단 기준
- p-value < 0.05 → 유의함
- p-value ≥ 0.05 → 유의하지 않음
- R² > 0.7 → 좋은 모델

### 흔한 실수
❌ sm.add_constant() 누락 (절편이 0이 됨)
❌ OLS(X, y) 순서 (정답: OLS(y, X))
❌ 예측 시 새 데이터에 const 컬럼 없음
❌ model.params 대신 model.coef_ 사용 (sklearn 문법)
```

---

## 📝 정답 코드 템플릿

### 기본 템플릿 (회귀계수, p-value, R²)

```python
import pandas as pd
import statsmodels.api as sm

# 데이터 생성
df = pd.DataFrame({
    '지점ID': [f'S{i:02d}' for i in range(1, 41)],
    '광고비': [100, 120, 90, 150, 110, 130, 140, 105, 125, 145,
               95, 135, 115, 155, 100, 140, 120, 110, 145, 125,
               105, 150, 130, 115, 135, 125, 140, 110, 155, 120,
               130, 145, 115, 125, 140, 105, 150, 135, 120, 160],
    '매장수': [5, 6, 4, 8, 5, 7, 7, 5, 6, 8,
               4, 7, 5, 9, 5, 7, 6, 5, 8, 6,
               5, 8, 7, 5, 7, 6, 7, 5, 9, 6,
               7, 8, 5, 6, 7, 5, 8, 7, 6, 9],
    '직원수': [10, 12, 8, 15, 10, 13, 14, 10, 12, 15,
               8, 14, 11, 17, 10, 14, 12, 10, 15, 12,
               10, 16, 13, 11, 14, 12, 14, 10, 17, 12,
               13, 15, 11, 12, 14, 10, 16, 14, 12, 18],
    '매출액': [500, 580, 450, 720, 520, 650, 680, 510, 600, 700,
               470, 670, 540, 750, 510, 690, 590, 530, 710, 610,
               520, 730, 640, 550, 660, 600, 680, 540, 760, 590,
               650, 710, 560, 610, 690, 520, 740, 670, 600, 780]
})

# X, y 분리
X = df[['광고비', '매장수', '직원수']]
y = df['매출액']

# 절편 추가
X = sm.add_constant(X)

# OLS 모델 적합
model = sm.OLS(y, X).fit()

# Q1: 광고비 회귀계수
print(round(model.params['광고비'], 3))

# Q2: 광고비 p-value
print(round(model.pvalues['광고비'], 4))

# Q3: 매장수 유의성
print("유의" if model.pvalues['매장수'] < 0.05 else "유의하지 않음")

# Q4: R²
print(round(model.rsquared, 3))
```

### 고급 템플릿 (예측 포함)

```python
import pandas as pd
import statsmodels.api as sm

# 데이터 생성
df = pd.DataFrame({
    '지점ID': [f'S{i:02d}' for i in range(1, 41)],
    '광고비': [100, 120, 90, 150, 110, 130, 140, 105, 125, 145,
               95, 135, 115, 155, 100, 140, 120, 110, 145, 125,
               105, 150, 130, 115, 135, 125, 140, 110, 155, 120,
               130, 145, 115, 125, 140, 105, 150, 135, 120, 160],
    '매장수': [5, 6, 4, 8, 5, 7, 7, 5, 6, 8,
               4, 7, 5, 9, 5, 7, 6, 5, 8, 6,
               5, 8, 7, 5, 7, 6, 7, 5, 9, 6,
               7, 8, 5, 6, 7, 5, 8, 7, 6, 9],
    '직원수': [10, 12, 8, 15, 10, 13, 14, 10, 12, 15,
               8, 14, 11, 17, 10, 14, 12, 10, 15, 12,
               10, 16, 13, 11, 14, 12, 14, 10, 17, 12,
               13, 15, 11, 12, 14, 10, 16, 14, 12, 18],
    '매출액': [500, 580, 450, 720, 520, 650, 680, 510, 600, 700,
               470, 670, 540, 750, 510, 690, 590, 530, 710, 610,
               520, 730, 640, 550, 660, 600, 680, 540, 760, 590,
               650, 710, 560, 610, 690, 520, 740, 670, 600, 780]
})

# X, y 분리
X = df[['광고비', '매장수', '직원수']]
y = df['매출액']

# 절편 추가
X = sm.add_constant(X)

# OLS 모델
model = sm.OLS(y, X).fit()

# Q1: 광고비 회귀계수
print(round(model.params['광고비'], 3))

# Q2: 절편값
print(round(model.params['const'], 2))

# Q3: 유의한 변수 개수 (const 제외)
significant_count = sum(model.pvalues[1:] < 0.05)
print(significant_count)

# Q4: R²
print(round(model.rsquared, 3))

# Q5: 예측 (광고비=120, 매장수=6, 직원수=12)
new_X = pd.DataFrame({
    'const': [1],
    '광고비': [120],
    '매장수': [6],
    '직원수': [12]
})
pred = model.predict(new_X)
print(round(pred.values[0], 2))

# Q6: 절대값 기준 가장 큰 회귀계수의 변수명 (const 제외)
abs_params = model.params[1:].abs()
print(abs_params.idxmax())
```

---

## 🔍 시나리오 예시

### 마케팅/비즈니스
"한 프랜차이즈 기업에서 각 지점의 월 매출액에 영향을 주는 요인을 분석하고자 합니다. 40개 지점의 월 광고비(만원), 매장 수, 직원 수와 월 매출액(만원) 데이터를 수집했습니다. 다중선형회귀분석을 통해 각 요인이 매출에 미치는 영향을 분석하고, 새로운 지점의 매출을 예측하고자 합니다."

### 부동산
"한 도시의 아파트 가격 결정 요인을 분석하고자 합니다. 35개 아파트의 전용면적(㎡), 층수, 역세권 거리(m)와 거래 가격(억원) 데이터를 조사했습니다. 각 요인이 가격에 미치는 영향을 회귀분석으로 확인하고, 특정 조건의 아파트 가격을 예측하고자 합니다."

### 교육
"한 교육기관에서 학생들의 최종 성적에 영향을 주는 요인을 분석하고자 합니다. 45명 학생의 주당 공부시간, 출석률(%), 과제 제출 개수와 기말시험 점수를 조사했습니다. 다중선형회귀를 통해 각 요인의 영향력을 파악하고, 특정 학습 패턴을 가진 학생의 성적을 예측하고자 합니다."

### 제조업
"한 공장에서 제품 생산량에 영향을 주는 요인을 분석하고자 합니다. 30일간 일별 근무 인원, 가동 시간(시간), 원자재 투입량(kg)과 일일 생산량(개)을 기록했습니다. 각 요인이 생산량에 미치는 영향을 분석하고, 특정 조건에서의 생산량을 예측하고자 합니다."

---

## ⚠️ 주의사항

### 반드시 지킬 것
1. ✅ 리터럴 데이터만 사용 (np.random 금지)
2. ✅ 변수명은 한국어
3. ✅ 30-50개 샘플
4. ✅ "## ❓ 질문" 헤더 필수
5. ✅ Q1. Q2. Q3. Q4. Q5. 형식 사용
6. ✅ 종속변수 1개 + 독립변수 2-4개 (모두 연속형)

### statsmodels OLS 필수 사항
- **sm.add_constant(X) 반드시 사용** (절편 추가)
- **OLS(y, X) 순서 준수** (y가 먼저)
- 예측 시 새 데이터에도 const 컬럼 필수

### 흔한 실수 방지
- ❌ **1)**, **2)** 형식 사용
- ❌ sm.add_constant() 누락
- ❌ OLS(X, y) 순서 잘못
- ❌ 정답 코드에서 `df = pd.DataFrame({...})` 생략
- ❌ sklearn의 LinearRegression() 사용 (statsmodels OLS 사용)
- ❌ model.coef_ 사용 (model.params 사용)

---

## 🚀 문제 생성 지침

위 모든 규칙을 따라, 다음 순서로 문제를 생성하세요:

1. **# [제목]** - 간결한 제목
2. **## 시나리오** - 2-3문장의 현실적 상황 (Y를 X1, X2, X3로 예측하는 상황)
3. **## 데이터 생성 코드** - 30-50행, 종속변수 1개 + 독립변수 2-4개, 리터럴 값으로만
4. **## ❓ 질문** - Q1~Q6 형식 (최소 4개)
5. **## 힌트** - 라이브러리, 함수, 주의사항
6. **## 정답 코드** - 완전한 실행 가능 코드 (데이터 생성 포함, sm.add_constant() 사용)

지금 바로 문제를 생성하세요!
